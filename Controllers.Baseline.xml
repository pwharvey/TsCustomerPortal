<?xml version="1.0" encoding="utf-8"?>
<dataControllerCollection xmlns="urn:schemas-codeontime-com:data-aquarium" snapshot="true">
  <dataController name="Roles" conflictDetection="overwriteChanges" label="Roles" nativeSchema="dbo" nativeTableName="Roles">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"Roles"."RoleID" "RoleID"
	,"Roles"."RoleName" "RoleName"
from "dbo"."Roles" "Roles"
]]></text>
      </command>
      <command id="RoleIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="RoleID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="RoleID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Role ID" readOnly="true" />
      <field name="RoleName" type="String" label="Role Name" length="50" showInSummary="true" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Roles">
        <headerText />
        <dataFields>
          <dataField fieldName="RoleName" columns="50" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Role">
        <headerText />
        <categories>
          <category id="c1" headerText="Role">
            <description />
            <dataFields>
              <dataField fieldName="RoleName" columns="50" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Role">
        <headerText />
        <categories>
          <category id="c1" headerText="New Role">
            <description />
            <dataFields>
              <dataField fieldName="RoleName" columns="50" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="createForm1" headerText="New Role" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
        <action id="a100" whenLastCommandName="Update" whenView="createForm1" commandName="Select" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" headerText="New Role" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="Company" conflictDetection="overwriteChanges" label="Company" nativeSchema="dbo" nativeTableName="tCompany">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tCompany"."CompanyID" "CompanyID"
	,"tCompany"."CompanyName" "CompanyName"
	,"tCompany"."LinkedServerName" "LinkedServerName"
	,"tCompany"."DatabaseName" "DatabaseName"
	,"tCompany"."CreatedBy" "CreatedBy"
	,"tCompany"."CreatedOn" "CreatedOn"
	,"tCompany"."ModifiedBy" "ModifiedBy"
	,"tCompany"."ModifiedOn" "ModifiedOn"
from "dbo"."tCompany" "tCompany"
]]></text>
      </command>
      <command id="CompanyIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="CompanyID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="CompanyID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Company ID" readOnly="true" />
      <field name="CompanyName" type="String" allowNulls="false" label="Company Name" length="50" showInSummary="true" />
      <field name="LinkedServerName" type="String" label="Linked Server Name" length="50" showInSummary="true" />
      <field name="DatabaseName" type="String" label="Database Name" length="50" showInSummary="true" />
      <field name="CreatedBy" type="String" allowNulls="false" label="Created By" length="50" showInSummary="true" />
      <field name="CreatedOn" type="DateTime" dataFormatString="g" label="Created On" showInSummary="true" />
      <field name="ModifiedBy" type="String" label="Modified By" length="50" />
      <field name="ModifiedOn" type="DateTime" dataFormatString="g" label="Modified On" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Company">
        <headerText />
        <dataFields>
          <dataField fieldName="CompanyName" columns="50" />
          <dataField fieldName="LinkedServerName" columns="50" />
          <dataField fieldName="DatabaseName" columns="50" />
          <dataField fieldName="CreatedBy" columns="50" />
          <dataField fieldName="CreatedOn" columns="20" />
          <dataField fieldName="ModifiedBy" columns="50" />
          <dataField fieldName="ModifiedOn" columns="20" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Company">
        <headerText />
        <categories>
          <category id="c1" headerText="Company">
            <description />
            <dataFields>
              <dataField fieldName="CompanyName" columns="50" />
              <dataField fieldName="LinkedServerName" columns="50" />
              <dataField fieldName="DatabaseName" columns="50" />
            </dataFields>
          </category>
          <category headerText="Modified By" id="c2" newColumn="true">
            <dataFields>
              <dataField fieldName="ModifiedBy" columns="50" />
              <dataField fieldName="ModifiedOn" columns="20" />
              <dataField fieldName="CreatedBy" columns="50" />
              <dataField fieldName="CreatedOn" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Company">
        <headerText />
        <categories>
          <category id="c1" headerText="New Company">
            <description />
            <dataFields>
              <dataField fieldName="CompanyName" columns="50" />
              <dataField fieldName="LinkedServerName" columns="50" />
              <dataField fieldName="DatabaseName" columns="50" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="createForm1" headerText="New Company" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
        <action commandName="SQL" headerText="Get Customers" id="a100">
          <data>EXEC pCustomerGet @CompanyID, @BusinessRules_UserId</data>
        </action>
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" headerText="New Company" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
      <actionGroup id="ag100" scope="ActionBar" headerText="Action Flat" flat="true">
        <action commandName="SQL" headerText="Get Customers" whenKeySelected="true" id="a100">
          <data>EXEC pCustomerGet @CompanyID, @BusinessRules_UserId</data>
        </action>
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ConsignmentPurchaseOrder" conflictDetection="overwriteChanges" label="Consignment Purchase Order" nativeSchema="dbo" nativeTableName="tConsignmentPurchaseOrder">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tConsignmentPurchaseOrder"."ConsignmentPurchaseOrderID" "ConsignmentPurchaseOrderID"
	,"tConsignmentPurchaseOrder"."CustomerID" "CustomerID"
	,"tConsignmentPurchaseOrder"."CustomerRef" "CustomerRef"
	,"tConsignmentPurchaseOrder"."SentOn" "SentOn"
	,"tConsignmentPurchaseOrder"."CreatedBy" "CreatedBy"
	,"tConsignmentPurchaseOrder"."CreatedOn" "CreatedOn"
	,"tConsignmentPurchaseOrder"."ModifiedBy" "ModifiedBy"
	,"tConsignmentPurchaseOrder"."ModifiedOn" "ModifiedOn"
from "dbo"."tConsignmentPurchaseOrder" "tConsignmentPurchaseOrder"
]]></text>
      </command>
      <command id="ConsignmentPurchaseOrderIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="ConsignmentPurchaseOrderID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="ConsignmentPurchaseOrderID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Consignment Purchase Order ID" readOnly="true" />
      <field name="CustomerID" type="Int32" allowNulls="false" label="Customer ID" showInSummary="true" />
      <field name="CustomerRef" type="String" label="Customer Ref" length="50" showInSummary="true" />
      <field name="SentOn" type="DateTime" allowNulls="false" dataFormatString="g" label="Sent On" showInSummary="true" />
      <field name="CreatedBy" type="String" allowNulls="false" label="Created By" length="50" showInSummary="true" />
      <field name="CreatedOn" type="DateTime" allowNulls="false" dataFormatString="g" label="Created On" showInSummary="true" />
      <field name="ModifiedBy" type="String" allowNulls="false" label="Modified By" length="50" />
      <field name="ModifiedOn" type="DateTime" allowNulls="false" dataFormatString="g" label="Modified On" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Consignment Purchase Orders" sortExpression="ConsignmentPurchaseOrderID desc">
        <headerText />
        <dataFields>
          <dataField fieldName="ConsignmentPurchaseOrderID" />
          <dataField fieldName="CustomerRef" columns="20" />
          <dataField fieldName="SentOn" columns="20" />
          <dataField fieldName="CreatedBy" columns="15" />
          <dataField fieldName="CreatedOn" columns="20" />
          <dataField fieldName="ModifiedBy" columns="15" />
          <dataField fieldName="ModifiedOn" columns="20" />
          <dataField fieldName="CustomerID" columns="15" hidden="true">
          </dataField>
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Consignment Purchase Order">
        <headerText />
        <categories>
          <category id="c1" headerText="Consignment Purchase Order">
            <description />
            <dataFields>
              <dataField fieldName="ConsignmentPurchaseOrderID" columns="15" />
              <dataField fieldName="CustomerRef" columns="50" />
              <dataField fieldName="SentOn" columns="20" />
              <dataField fieldName="CustomerID" columns="15" hidden="true">
              </dataField>
            </dataFields>
          </category>
          <category headerText="Modified" id="c2" newColumn="true">
            <dataFields>
              <dataField fieldName="ModifiedBy" columns="50" />
              <dataField fieldName="ModifiedOn" columns="20" />
              <dataField fieldName="CreatedBy" columns="50" />
              <dataField fieldName="CreatedOn" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ConsignmentStock" conflictDetection="overwriteChanges" label="Consignment Stock" nativeSchema="dbo" nativeTableName="tConsignmentStock">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tConsignmentStock"."ConsignmentStockID" "ConsignmentStockID"
	,"tConsignmentStock"."CustomerID" "CustomerID"
	,"tConsignmentStock"."PacketNo" "PacketNo"
	,"tConsignmentStock"."ProductID" "ProductID"
	,"Product"."ProductCode" "ProductCode"
	,"Product"."ProductName" "ProductName"
	,"Product"."CategoryCode" "ProductCategoryCode"
	,"Product"."CategoryName" "ProductCategoryName"
	,"Product"."Width" "ProductWidth"
	,"Product"."Thickness" "ProductThickness"
	,"Product"."Length" "ProductLength"
	,"tConsignmentStock"."TransferDocketNo" "TransferDocketNo"
	,"tConsignmentStock"."TransferDate" "TransferDate"
	,"tConsignmentStock"."Price" "Price"
	,"tConsignmentStock"."PriceUOM" "PriceUOM"
	,"tConsignmentStock"."Pieces" "Pieces"
	,"tConsignmentStock"."Cube" "Cube"
	,"tConsignmentStock"."Area" "Area"
	,"tConsignmentStock"."Lineal" "Lineal"
from "dbo"."tConsignmentStock" "tConsignmentStock"
	left join "dbo"."tProduct" "Product" on "tConsignmentStock"."ProductID" = "Product"."ProductID"
]]></text>
      </command>
      <command id="ConsignmentStockIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="ConsignmentStockID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="ConsignmentStockID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Consignment Stock ID" readOnly="true" />
      <field name="CustomerID" type="Int32" allowNulls="false" label="Customer ID" showInSummary="true" readOnly="true" />
      <field name="PacketNo" type="String" allowNulls="false" label="Packet No" length="50" showInSummary="true" readOnly="true" />
      <field name="ProductID" type="Int32" allowNulls="false" label="Product ID" readOnly="true">
        <items style="Lookup" dataController="Product" dataValueField="ProductID" dataTextField="ProductCode" copy="ProductName=ProductName, ProductCategoryCode=CategoryCode, ProductCategoryName=CategoryName, ProductWidth=Width, ProductThickness=Thickness, ProductLength=Length" />
      </field>
      <field name="ProductCode" type="String" readOnly="true" label="Product Code" length="50" />
      <field name="ProductName" type="String" readOnly="true" label="Product Name" length="70" showInSummary="true" />
      <field name="ProductCategoryCode" type="String" readOnly="true" label="Category Code" length="5" />
      <field name="ProductCategoryName" type="String" readOnly="true" label="Category Name" length="50" />
      <field name="ProductWidth" type="Decimal" readOnly="true" label="Width" />
      <field name="ProductThickness" type="Decimal" readOnly="true" label="Thickness" />
      <field name="ProductLength" type="Decimal" readOnly="true" label="Length" />
      <field name="TransferDocketNo" type="Int32" label="Docket No" showInSummary="true" />
      <field name="TransferDate" type="DateTime" label="Transfer Date" showInSummary="true" dataFormatString="D" />
      <field name="Price" type="Decimal" dataFormatString="c" label="Price" roles="Consignment Pricing,Admins" />
      <field name="PriceUOM" type="String" label="Price UOM" length="50" />
      <field name="Pieces" type="Decimal" allowNulls="false" default="((0))" label="Pieces" readOnly="true" />
      <field name="Cube" type="Decimal" allowNulls="false" default="((0))" label="Cube" readOnly="true" />
      <field name="Area" type="Decimal" allowNulls="false" default="((0))" label="Area" readOnly="true" />
      <field name="Lineal" type="Decimal" allowNulls="false" default="((0))" label="Lineal" readOnly="true" showInSummary="true" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Consignment Stock" sortExpression="ProductCategoryName, ProductWidth, ProductThickness, ProductName, PacketNo" access="Public">
        <headerText />
        <dataFields>
          <dataField fieldName="ProductCategoryName" columns="50" tag="pivot1-row1-column &#xD;&#xA;pivot2-row1-pie&#xD;&#xA;" />
          <dataField fieldName="ProductName" tag="pivot3-row1-column-top20-sortascbyvalue" />
          <dataField fieldName="PacketNo" columns="10" tag="pivot1-val1-count&#xD;&#xA;pivot2-val1-count&#xD;&#xA;pivot3-val1-count&#xD;&#xA;" />
          <dataField fieldName="Pieces" columns="15" />
          <dataField fieldName="Cube" columns="15" />
          <dataField fieldName="Area" columns="15" />
          <dataField fieldName="Lineal" columns="15" />
          <dataField fieldName="TransferDocketNo" columns="15" />
          <dataField fieldName="TransferDate" columns="10">
          </dataField>
          <dataField fieldName="Price" columns="15" />
          <dataField fieldName="PriceUOM" columns="50" />
          <dataField fieldName="ProductCategoryCode" columns="5" />
          <dataField fieldName="ProductID" aliasFieldName="ProductCode">
          </dataField>
          <dataField fieldName="ProductWidth" columns="15" />
          <dataField fieldName="ProductThickness" columns="15" />
          <dataField fieldName="ProductLength" columns="15" />
          <dataField fieldName="CustomerID" columns="15" hidden="true" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Consignment Stock">
        <headerText />
        <categories>
          <category id="c1" headerText="Packet">
            <description />
            <dataFields>
              <dataField fieldName="PacketNo" columns="50" />
              <dataField fieldName="ProductName" />
              <dataField fieldName="PriceUOM" columns="50" />
            </dataFields>
          </category>
          <category headerText="Transfer Docket" id="c5">
            <dataFields>
              <dataField fieldName="TransferDocketNo" columns="15" />
              <dataField fieldName="TransferDate" columns="10" />
            </dataFields>
          </category>
          <category headerText="Pricing" id="c6">
            <dataFields>
              <dataField fieldName="Price" columns="15" />
            </dataFields>
          </category>
          <category headerText="Measures" id="c2" newColumn="true">
            <dataFields>
              <dataField fieldName="Area" columns="15" />
              <dataField fieldName="Lineal" columns="15" />
              <dataField fieldName="Pieces" columns="15" />
              <dataField fieldName="Cube" columns="15" />
            </dataFields>
          </category>
          <category headerText="Dimensions" id="c4">
            <dataFields>
              <dataField fieldName="ProductLength" columns="15" />
              <dataField fieldName="ProductThickness" columns="15" />
              <dataField fieldName="ProductWidth" columns="15" />
            </dataFields>
          </category>
          <category headerText="Codes" id="c3">
            <dataFields>
              <dataField fieldName="ProductID" aliasFieldName="ProductCode" hyperlinkFormatString="~/pages/Product?ProductID={ProductID}&amp;_controller=Product&amp;_command=Select&amp;_argument=editForm1" />
              <dataField fieldName="ProductCategoryCode" columns="5" />
              <dataField fieldName="ProductCategoryName" columns="50" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a3" commandName="Cancel" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn" flat="false">
      </actionGroup>
      <actionGroup id="ag100" scope="ActionBar" headerText="Actions Flat" flat="true">
        <action commandName="SQL" id="a100" headerText="Update From Supplier" roles="Consignment Edit">
          <data>Exec pConsignmentStockGet @BusinessRules_UserId</data>
        </action>
      </actionGroup>
    </actions>
    <businessRules>
      <rule id="r100" commandName="Select" type="Sql" phase="Before">--Exec pConsignmentStockGet @BusinessRules_UserId
--SET @Result_ShowAlert = @BusinessRules_UserId
--SET @Session_StockGet = GetDate()
</rule>
    </businessRules>
  </dataController>
  <dataController name="ConsignmentUsage" conflictDetection="overwriteChanges" label="Consignment Usage" nativeSchema="dbo" nativeTableName="tConsignmentUsage">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tConsignmentUsage"."ConsignmentUsageID" "ConsignmentUsageID"
	,"tConsignmentUsage"."CustomerID" "CustomerID"
	,"tConsignmentUsage"."PacketNo" "PacketNo"
	,"tConsignmentUsage"."ConsumedOn" "ConsumedOn"
	,"tConsignmentUsage"."ProductID" "ProductID"
	,"Product"."ProductName" "ProductName"
	,"Product"."CategoryCode" "ProductCategoryCode"
	,"Product"."CategoryName" "ProductCategoryName"
	,"Product"."Width" "ProductWidth"
	,"Product"."Thickness" "ProductThickness"
	,"Product"."Length" "ProductLength"
	,"tConsignmentUsage"."InStock" "InStock"
	,"tConsignmentUsage"."Errors" "Errors"
	,"tConsignmentUsage"."SentOn" "SentOn"
	,"tConsignmentUsage"."CreatedBy" "CreatedBy"
	,"tConsignmentUsage"."CreatedOn" "CreatedOn"
	,"tConsignmentUsage"."ModifiedBy" "ModifiedBy"
	,"tConsignmentUsage"."ModifiedOn" "ModifiedOn"
	,"tConsignmentUsage"."Price" "Price"
	,"tConsignmentUsage"."PriceUOM" "PriceUOM"
	,"tConsignmentUsage"."Pieces" "Pieces"
	,"tConsignmentUsage"."Cube" "Cube"
	,"tConsignmentUsage"."Area" "Area"
	,"tConsignmentUsage"."Lineal" "Lineal"
	,"tConsignmentUsage"."ConsignmentPurchaseOrderID" "ConsignmentPurchaseOrderID"
	,"ConsignmentPurchaseOrder"."CustomerRef" "ConsignmentPurchaseOrderCustomerRef"
from "dbo"."tConsignmentUsage" "tConsignmentUsage"
	left join "dbo"."tProduct" "Product" on "tConsignmentUsage"."ProductID" = "Product"."ProductID"
	left join "dbo"."tConsignmentPurchaseOrder" "ConsignmentPurchaseOrder" on "tConsignmentUsage"."ConsignmentPurchaseOrderID" = "ConsignmentPurchaseOrder"."ConsignmentPurchaseOrderID"
]]></text>
      </command>
      <command id="ConsignmentUsageIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="ConsignmentUsageID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="ConsignmentUsageID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Consignment Usage ID" readOnly="true" />
      <field name="CustomerID" type="Int32" allowNulls="false" label="Customer ID" showInSummary="true" />
      <field name="PacketNo" type="String" label="Packet No" length="50" showInSummary="true" causesCalculate="true" />
      <field name="ConsumedOn" type="DateTime" allowNulls="false" dataFormatString="g" label="Consumed On" showInSummary="true" />
      <field name="Cube" type="Decimal" label="Cube" />
      <field name="Area" type="Decimal" label="Area" />
      <field name="Lineal" type="Decimal" label="Lineal" />
      <field name="Price" type="Decimal" dataFormatString="c" label="Price" roles="Consignment Pricing" />
      <field name="Pieces" type="Int32" label="Pieces" />
      <field name="ProductID" type="Int32" label="Product ID" showInSummary="true">
        <items style="Lookup" dataController="Product" dataValueField="ProductID" dataTextField="ProductName" copy="ProductCategoryCode=CategoryCode, ProductCategoryName=CategoryName, ProductWidth=Width, ProductThickness=Thickness, ProductLength=Length" />
      </field>
      <field name="ProductName" type="String" label="Product Name" length="70" showInSummary="true" readOnly="true" />
      <field name="ProductCategoryCode" type="String" readOnly="true" label="Category Code" length="5" />
      <field name="ProductCategoryName" type="String" readOnly="true" label="Category Name" length="50" />
      <field name="ProductWidth" type="Decimal" readOnly="true" label="Width" />
      <field name="ProductThickness" type="Decimal" readOnly="true" label="Thickness" />
      <field name="ProductLength" type="Decimal" readOnly="true" label="Length" />
      <field name="InStock" type="Boolean" default="((0))" label="In Stock" showInSummary="true" />
      <field name="Errors" type="String" label="Errors" length="250" />
      <field name="SentOn" type="DateTime" dataFormatString="g" label="Sent On" />
      <field name="CreatedBy" type="String" label="Created By" length="50" />
      <field name="CreatedOn" type="DateTime" dataFormatString="g" label="Created On" />
      <field name="ModifiedBy" type="String" label="Modified By" length="50" />
      <field name="ModifiedOn" type="DateTime" dataFormatString="g" label="Modified On" />
      <field name="PriceUOM" type="String" label="Price UOM" length="50" />
      <field name="ConsignmentPurchaseOrderID" type="Int32" label="Purchase Order No">
        <items style="Lookup" dataController="ConsignmentPurchaseOrder" dataValueField="ConsignmentPurchaseOrderID" dataTextField="ConsignmentPurchaseOrderID" />
      </field>
      <field name="ConsignmentPurchaseOrderCustomerRef" type="String" readOnly="true" label="Customer Ref" length="50" />
      <field name="LastPacketNo" type="String" label="Last Packet No" allowQBE="false" allowSorting="false" htmlEncode="false" hidden="false" length="20" />
      <field name="LastError" type="String" label="Last Error" allowQBE="false" allowSorting="false" htmlEncode="false" hidden="false" length="100" />
      <field name="LastProductName" type="String" label="Last Product" allowQBE="false" allowSorting="false" htmlEncode="false" hidden="false" length="100" />
      <field name="WidthAndThickness" type="String" allowNulls="false" label="Width And Thickness" allowQBE="false" allowSorting="false" computed="true" htmlEncode="false" hidden="false">
        <formula>Cast(Cast([Width] as int) as nvarchar(10)) + Cast(Cast([Thickness] as int) as nvarchar(10)) </formula>
      </field>
      <field name="Empty" type="String" label="Empty" allowQBE="false" allowSorting="false" htmlEncode="false" hidden="false" />
    </fields>
    <views>
      <view id="gridEntered" type="Grid" commandId="command1" label="Usage Entered" filter="SentOn IS NULL" sortExpression="ConsignmentUsageID desc" reportTemplate="true">
        <headerText />
        <dataFields>
          <dataField fieldName="PacketNo" columns="50" tag="pivot1-val1-count&#xD;&#xA;pivot2-val1-count" />
          <dataField fieldName="ProductID" aliasFieldName="ProductName" hyperlinkFormatString="~/pages/Product?ProductID={ProductID}&amp;_controller=Product&amp;_command=Select&amp;_argument=editForm1" columns="100" />
          <dataField fieldName="ConsumedOn" columns="20" tag="pivot1-row1-columnstacked-date" />
          <dataField fieldName="InStock" />
          <dataField fieldName="Errors" />
          <dataField fieldName="SentOn" columns="20" />
          <dataField fieldName="Pieces" columns="15" />
          <dataField fieldName="Cube" columns="15" />
          <dataField fieldName="Area" columns="15" />
          <dataField fieldName="Lineal" columns="15" />
          <dataField fieldName="Price" columns="15" />
          <dataField fieldName="PriceUOM" columns="50" />
          <dataField fieldName="ProductCategoryCode" columns="5" hidden="true" />
          <dataField fieldName="ProductCategoryName" columns="50" tag="pivot1-col11&#xD;&#xA;pivot2-row1-pie" />
          <dataField fieldName="ProductWidth" columns="15" />
          <dataField fieldName="ProductThickness" columns="15" />
          <dataField fieldName="ProductLength" columns="15" />
          <dataField fieldName="CustomerID" columns="15" hidden="true" />
          <dataField fieldName="WidthAndThickness" rows="5" hidden="true">
          </dataField>
        </dataFields>
      </view>
      <view id="gridSent" commandId="command1" type="Grid" label="Usage Sent" filter="NOT SentOn IS NULL" sortExpression="ConsignmentUsageID desc" reportTemplate="true">
        <dataFields>
          <dataField fieldName="PacketNo" columns="50" tag="pivot1-val1-count&#xD;&#xA;pivot2-val1-count" />
          <dataField fieldName="ProductID" aliasFieldName="ProductName" columns="100">
          </dataField>
          <dataField fieldName="ConsumedOn" columns="20" tag="pivot1-row1-columnstacked-date" />
          <dataField fieldName="Price" columns="15" />
          <dataField fieldName="PriceUOM" columns="50" />
          <dataField fieldName="ConsignmentPurchaseOrderID" columns="15" />
          <dataField fieldName="ConsignmentPurchaseOrderCustomerRef" columns="50" />
          <dataField fieldName="SentOn" columns="20" />
          <dataField fieldName="Pieces" columns="15" />
          <dataField fieldName="Cube" columns="15" />
          <dataField fieldName="Area" columns="15" />
          <dataField fieldName="Lineal" columns="15" />
          <dataField fieldName="ProductCategoryCode" columns="5" tag="pivot1-col1" hidden="true" />
          <dataField fieldName="ProductCategoryName" columns="50" tag="pivot1-col11&#xD;&#xA;pivot2-row1-pie" />
          <dataField fieldName="ProductWidth" columns="15" />
          <dataField fieldName="ProductThickness" columns="15" />
          <dataField fieldName="ProductLength" columns="15" />
          <dataField fieldName="CustomerID" columns="15" hidden="true">
          </dataField>
        </dataFields>
      </view>
      <view id="gridErrors" commandId="command1" type="Grid" label="Usage Errors" filter="NOT Errors IS NULL" sortExpression="ConsignmentUsageID desc" reportTemplate="true">
        <dataFields>
          <dataField fieldName="PacketNo" columns="50" tag="pivot1-val1-count" />
          <dataField fieldName="ProductID" aliasFieldName="ProductName" columns="100">
          </dataField>
          <dataField fieldName="ConsumedOn" columns="20" tag="pivot1-row1-column-date" />
          <dataField fieldName="InStock" />
          <dataField fieldName="Errors" />
          <dataField fieldName="SentOn" columns="20" />
          <dataField fieldName="ProductCategoryCode" columns="5" />
          <dataField fieldName="ProductWidth" columns="15" />
          <dataField fieldName="ProductThickness" columns="15">
          </dataField>
          <dataField fieldName="ProductLength" columns="15" />
          <dataField fieldName="CustomerID" columns="15" hidden="true">
          </dataField>
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Consignment Usage">
        <headerText />
        <categories>
          <category id="c1" headerText="Consignment Usage">
            <description />
            <dataFields>
              <dataField fieldName="PacketNo" columns="50" />
              <dataField fieldName="ProductID" aliasFieldName="ProductName" hyperlinkFormatString="~/pages/Product?ProductID={ProductID}&amp;_controller=Product&amp;_command=Select&amp;_argument=editForm1" textMode="Static" />
              <dataField fieldName="ConsumedOn" columns="20" textMode="Static" />
              <dataField fieldName="PriceUOM" columns="50" />
            </dataFields>
          </category>
          <category headerText="Measures" id="c4">
            <dataFields>
              <dataField fieldName="Area" columns="15" />
              <dataField fieldName="Lineal" columns="15" />
              <dataField fieldName="Pieces" columns="15" />
              <dataField fieldName="Cube" columns="15" />
            </dataFields>
          </category>
          <category headerText="Pricing" id="c5" newColumn="true">
            <dataFields>
              <dataField fieldName="Price" columns="15" />
            </dataFields>
          </category>
          <category headerText="Stock Status" id="c3">
            <dataFields>
              <dataField fieldName="InStock" textMode="Static" />
              <dataField fieldName="Errors" textMode="Static" />
            </dataFields>
          </category>
          <category headerText="Purchase Order" id="c6">
            <dataFields>
              <dataField fieldName="ConsignmentPurchaseOrderID" hyperlinkFormatString="~/pages/ConsignmentPurchaseOrder?ConsignmentPurchaseOrderID={ConsignmentPurchaseOrderID}&amp;_controller=ConsignmentPurchaseOrder&amp;_command=Select&amp;_argument=editForm1" />
              <dataField fieldName="ConsignmentPurchaseOrderCustomerRef" columns="50" />
              <dataField fieldName="SentOn" columns="20" textMode="Static" />
            </dataFields>
          </category>
          <category headerText="Modification History" id="c2" collapsed="true">
            <dataFields>
              <dataField fieldName="CreatedBy" columns="50" textMode="Static" />
              <dataField fieldName="CreatedOn" columns="20" textMode="Static" />
              <dataField fieldName="ModifiedBy" columns="50" textMode="Static" />
              <dataField fieldName="ModifiedOn" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Consignment Usage">
        <headerText>This form is designed for quick entry of packets consumed by scanning or entering packets.  When a packet is scanned or entered the record will be added without the need to click an OK button. </headerText>
        <categories>
          <category id="c1" headerText="Consignment Usage">
            <description />
            <dataFields>
              <dataField fieldName="PacketNo" columns="50" />
              <dataField fieldName="ProductID" aliasFieldName="ProductName" textMode="Text">
              </dataField>
              <dataField fieldName="ConsumedOn" columns="20" textMode="Text" />
              <dataField fieldName="ProductCategoryCode" columns="5" hidden="true">
              </dataField>
              <dataField fieldName="ProductCategoryName" columns="50" hidden="true">
              </dataField>
              <dataField fieldName="ProductWidth" columns="15" hidden="true">
              </dataField>
              <dataField fieldName="ProductThickness" columns="15" hidden="true">
              </dataField>
              <dataField fieldName="ProductLength" columns="15" hidden="true">
              </dataField>
              <dataField fieldName="Price" columns="15" hidden="true" />
              <dataField fieldName="PriceUOM" columns="50" hidden="true">
              </dataField>
              <dataField fieldName="Pieces" columns="15" hidden="true" />
              <dataField fieldName="Cube" columns="15" hidden="true" />
              <dataField fieldName="Area" columns="15" hidden="true" />
              <dataField fieldName="Lineal" columns="15" hidden="true" />
              <dataField fieldName="Errors" rows="5" hidden="true" />
              <dataField fieldName="InStock" hidden="true" />
              <dataField fieldName="CustomerID" columns="15" hidden="true">
              </dataField>
            </dataFields>
          </category>
          <category headerText="Last Entered" id="c3" newColumn="true">
            <dataFields>
              <dataField fieldName="LastPacketNo" textMode="Static" />
              <dataField fieldName="LastProductName" textMode="Static" />
              <dataField fieldName="LastError" textMode="Static" />
            </dataFields>
            <description>Details of the last packet scanned or entered</description>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="createForm1" headerText="New Usage" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action commandName="Insert" commandArgument="CANCEL" headerText="Close" whenLastCommandName="New" id="a100" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" headerText="New Usage" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="gridEntered" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag100" scope="ActionBar" headerText="Actions Flat" flat="true">
        <action commandName="SQL" id="a100" headerText="Send To Supplier" roles="Consignment Edit" confirmation="_controller=ConsignmentUsageSend&#xD;&#xA;_title=Send Usage" cssClass="ui-icon-carat-r">
          <data>EXEC	[dbo].[pConsignmentStockConsume] @BusinessRules_UserId, @Parameters_CustomerRef
SET @Result_Refresh = 1</data>
        </action>
      </actionGroup>
    </actions>
    <businessRules>
      <rule id="r100" commandName="New" type="Sql" phase="Execute">SELECT @CustomerID = (SELECT CustomerID FROM Users WHERE Users.UserID = @BusinessRules_UserId)
SELECT @ConsumedOn = GetDate()	
</rule>
      <rule id="r101" commandName="Calculate" type="Sql" phase="Execute">DECLARE @ExistingPacketNo nvarchar(50)
DECLARE @ExistingProductID int
DECLARE @ExistingProductName nvarchar(100)
DECLARE @ExistingPieces int
DECLARE @ExistingCube decimal(18,3)
DECLARE @ExistingArea decimal(18,3)
DECLARE @ExistingLineal decimal(18,3)
DECLARE @ExistingPrice decimal(18,2)
DECLARE @ExistingUOM nvarchar(50)
DECLARE @Success as bit
DECLARE @PacketCount as int 
DECLARE @PreviouslyConsumedOn date
BEGIN
    SET @Success = 1
	SET @Errors = null
	SELECT
	  @PacketCount = count(*),
	  @PreviouslyConsumedOn = min(ConsumedOn)
    FROM
	  tConsignmentUsage
    WHERE
	  tConsignmentUsage.CustomerID = @CustomerID and
	  tConsignmentUsage.PacketNo = @PacketNo and 
	  tConsignmentUsage.ConsignmentUsageID &lt;&gt; ISNULL(@ConsignmentUsageID,0)
     		
	IF @PacketCount &gt; 0
	BEGIN			
		SET @ProductID = null
		SET @ProductName = null
		SET @Errors = 'Packet already consumed on ' + Convert(nvarchar(30), @PreviouslyConsumedOn,103)
		SET @InStock = 0
		SET @Pieces = null
		SET @Cube = null
		SET @Area = null
		SET @Lineal = null
		SET @Price = null
		SET @PriceUom = null
	END
	ELSE
	BEGIN	
		SELECT
			@ExistingPacketNo = PacketNo,
			@ExistingProductID = tConsignmentStock.ProductID,
			@ExistingProductName = ProductName,
			@ExistingPieces = Pieces,
			@ExistingCube = Cube,			
			@ExistingArea = Area,
			@ExistingLineal = Lineal,
			@ExistingPrice = Price,
			@ExistingUOM = PriceUOM 
	  	FROM
			tConsignmentStock
		INNER JOIN
			tProduct
		ON
			tProduct.ProductID = tConsignmentStock.ProductID		
	  WHERE
		tConsignmentStock.CustomerID = @CustomerID and
		tConsignmentStock.PacketNo = @PacketNo	  

	  IF @ExistingPacketNo IS NULL 
	  BEGIN	  	   
		SET @ProductID = null
		SET @ProductName = null
		SET @Errors = 'Packet is not on consignment'
		SET @InStock = 0		
		SET @Pieces = null
		SET @Cube = null
		SET @Area = null
		SET @Lineal = null
		SET @Price = null
		SET @PriceUom = null
	  END
	  ELSE
	  BEGIN
		  SET @ProductID = @ExistingProductID
		  SET @ProductName = @ExistingProductName
		  SET @InStock = 1
		  SET @Errors = null
		  SET @Pieces = @ExistingPieces
		SET @Cube = @ExistingCube
		SET @Area = @ExistingArea
		SET @Lineal = @ExistingLineal
		SET @Price = @ExistingPrice
		SET @PriceUom = @ExistingUOM
		
	  END
	END
	  
	INSERT INTO tConsignmentUsage
		([CustomerID]
		,[PacketNo]
		,[ProductID]
		,[ConsumedOn]
		,[Pieces]
		,[Cube] 
		,[Area]
		,[Lineal] 
		,[Price]
		,[PriceUOM]
		,[InStock]
		,[Errors]
		,[SentOn]
		,[CreatedBy]
		,[CreatedOn]
		,[ModifiedBy]
		,[ModifiedOn])           
	SELECT
		@CustomerID,
		@PacketNo,
		@ProductID,
		@ConsumedOn,
		@Pieces,
		@Cube,
		@Area,
		@Lineal, 
		@Price,
		@PriceUom, 	
		@InStock,
		@Errors,
		null,
		@BusinessRules_UserName,
		GetDate(),
		@BusinessRules_UserName,
		GetDate();

	SET @LastPacketNo = @PacketNo;
	SET @LastError = @Errors;
	SET @LastProductName = @ProductName;
	SET @PacketNo = null
	SET @Errors = null
	SET @InStock = 0
	SET @ProductID = null
	SET @ProductName = null
	SET @Pieces = null
	SET @Cube = null
	SET @Area = null
	SET @Lineal = null
	SET @Price = null
	SET @PriceUom = null
	SET @ConsumedOn = GetDate()	

	
	SET @Result_Focus = 'PacketNo';

	  	
	
	
END</rule>
      <rule id="r102" commandName="Insert" commandArgument="CANCEL" type="Sql" phase="Before">SET @BusinessRules_PreventDefault = 1
</rule>
    </businessRules>
  </dataController>
  <dataController name="ContentDocumentType" conflictDetection="overwriteChanges" label="t Content Document Type" nativeSchema="dbo" nativeTableName="tContentDocumentType">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentDocumentType"."CONTENT_DOC_TYPE" "CONTENT_DOC_TYPE"
	,"tContentDocumentType"."CONTENT_DOC_TYPE_NAME" "CONTENT_DOC_TYPE_NAME"
	,"tContentDocumentType"."CONTENT_TYPE_GROUP" "ContentTypeGroup"
from "dbo"."tContentDocumentType" "tContentDocumentType"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="CONTENT_DOC_TYPE" type="String" isPrimaryKey="true" label="Content Document Type" length="6" showInSummary="true" />
      <field name="CONTENT_DOC_TYPE_NAME" type="String" label="Content Document Type Name" length="100" showInSummary="true" />
      <field name="ContentTypeGroup" type="String" label="Content Type Group" length="12" showInSummary="true" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Content Document Type">
        <headerText>$DefaultGridViewDescription</headerText>
        <dataFields>
          <dataField fieldName="CONTENT_DOC_TYPE" columns="6" />
          <dataField fieldName="CONTENT_DOC_TYPE_NAME" />
          <dataField fieldName="ContentTypeGroup" columns="12" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Document Type">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="t Content Document Type">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="CONTENT_DOC_TYPE" columns="6" />
              <dataField fieldName="CONTENT_DOC_TYPE_NAME" />
              <dataField fieldName="ContentTypeGroup" columns="12" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Content Document Type">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New t Content Document Type">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="CONTENT_DOC_TYPE" columns="6" />
              <dataField fieldName="CONTENT_DOC_TYPE_NAME" />
              <dataField fieldName="ContentTypeGroup" columns="12" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="grid1" />
        <action id="a8" commandName="Duplicate" commandArgument="createForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" />
        <action commandName="Search" confirmation="_controller=Content&#xD;&#xA;_shortcut=false " id="a100" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="tContentDocumentTypeGroup" conflictDetection="overwriteChanges" label="t Content Document Type Group" nativeSchema="dbo" nativeTableName="tContentDocumentTypeGroup">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentDocumentTypeGroup"."CONTENT_TYPE_GROUP" "CONTENT_TYPE_GROUP"
	,"tContentDocumentTypeGroup"."CONTENT_TYPE_GROUP_NAME" "CONTENT_TYPE_GROUP_NAME"
from "dbo"."tContentDocumentTypeGroup" "tContentDocumentTypeGroup"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="CONTENT_TYPE_GROUP" type="String" allowNulls="false" isPrimaryKey="true" label="Content Type Group" length="12" showInSummary="true" />
      <field name="CONTENT_TYPE_GROUP_NAME" type="String" allowNulls="false" label="Content Type Group Name" length="250" showInSummary="true" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Content Document Type Group">
        <headerText />
        <dataFields>
          <dataField fieldName="CONTENT_TYPE_GROUP" columns="12" />
          <dataField fieldName="CONTENT_TYPE_GROUP_NAME" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Document Type Group">
        <headerText />
        <categories>
          <category id="c1" headerText="t Content Document Type Group">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="CONTENT_TYPE_GROUP" columns="12" />
              <dataField fieldName="CONTENT_TYPE_GROUP_NAME" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Content Document Type Group">
        <headerText />
        <categories>
          <category id="c1" headerText="New t Content Document Type Group">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="CONTENT_TYPE_GROUP" columns="12" />
              <dataField fieldName="CONTENT_TYPE_GROUP_NAME" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="grid1" />
        <action id="a8" commandName="Duplicate" commandArgument="createForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ContentMessageCommandLookup" conflictDetection="overwriteChanges" label="Content Message Command Lookup" nativeSchema="dbo" nativeTableName="tContentMessageCommandLookup">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentMessageCommandLookup"."COMMAND_DESCRIPTION" "COMMAND_DESCRIPTION"
	,"tContentMessageCommandLookup"."COMMAND" "Command"
from "dbo"."tContentMessageCommandLookup" "tContentMessageCommandLookup"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="COMMAND_DESCRIPTION" type="String" label="Command Description" length="50" showInSummary="true" />
      <field name="Command" type="String" allowNulls="false" isPrimaryKey="true" label="Command" length="10" showInSummary="true" readOnly="true" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Content Message Command Lookup">
        <headerText>$DefaultGridViewDescription</headerText>
        <dataFields>
          <dataField fieldName="COMMAND_DESCRIPTION" columns="50" />
          <dataField fieldName="Command" columns="10" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Message Command Lookup">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="Content Message Command Lookup">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="COMMAND_DESCRIPTION" columns="50" />
              <dataField fieldName="Command" columns="10" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Content Message Command Lookup">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New Content Message Command Lookup">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="COMMAND_DESCRIPTION" columns="50" />
              <dataField fieldName="Command" columns="10" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a6" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ContentMessageCommands" conflictDetection="overwriteChanges" label="t Content Message Commands" nativeSchema="dbo" nativeTableName="tContentMessageCommands">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentMessageCommands"."EG_NAME" "EG_NAME"
	,"tContentMessageCommands"."EG_COMMAND" "EG_COMMAND"
from "dbo"."tContentMessageCommands" "tContentMessageCommands"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="EG_NAME" type="String" isPrimaryKey="true" label="Event Generator Name" length="50" showInSummary="true" readOnly="true" />
      <field name="EG_COMMAND" type="String" label="Event Generator Command" length="10" showInSummary="true">
        <items style="Lookup" dataController="ContentMessageCommandLookup" dataView="grid1" dataValueField="Command" />
      </field>
      <field name="COMMAND_DESCRIPTION" type="String" label="Current Command Description" length="50" showInSummary="true" computed="true">
        <formula>select COMMAND_DESCRIPTION
from  timbersmartITIwebportal.dbo.[tContentMessageCommandLookup] "Lookup"
where "Lookup"."COMMAND" =EG_COMMAND


</formula>
      </field>
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Content Message Commands">
        <headerText>$DefaultGridViewDescription</headerText>
        <dataFields>
          <dataField fieldName="EG_NAME" columns="50" />
          <dataField fieldName="EG_COMMAND" columns="10" />
          <dataField fieldName="COMMAND_DESCRIPTION" columns="50" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Message Commands">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="t Content Message Commands">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="EG_NAME" columns="50" />
              <dataField fieldName="EG_COMMAND" columns="10" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Content Message Commands">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New t Content Message Commands">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="EG_NAME" columns="50" />
              <dataField fieldName="EG_COMMAND" columns="10" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a6" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
      </actionGroup>
    </actions>
    <businessRules>
      <rule id="r101" commandName="Update" type="Code" phase="Execute" name="UpdateCommand" />
      <rule id="r100" commandName="Update" type="Sql" phase="Execute">delclare x as varchar(1)</rule>
    </businessRules>
  </dataController>
  <dataController name="ContentMessageHandler" conflictDetection="overwriteChanges" label="t Content Message Handler" nativeSchema="dbo" nativeTableName="tContentMessageHandler">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentMessageHandler"."msg_type" "msg_type"
	,"tContentMessageHandler"."msg_template" "msg_template"
	,"tContentMessageHandler"."error_template" "error_template"
	,"tContentMessageHandler"."msg_handler_name" "msg_handler_name"
	,"tContentMessageHandler"."ctrl_cre_date" "ctrl_cre_date"
	,"tContentMessageHandler"."ctrl_upd_date" "ctrl_upd_date"
	,"tContentMessageHandler"."ctrl_user" "ctrl_user"
from "dbo"."tContentMessageHandler" "tContentMessageHandler"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="msg_type" type="String" allowNulls="false" isPrimaryKey="true" label="Message Type" length="50" showInSummary="true" />
      <field name="msg_template" type="String" onDemand="true" sourceFields="msg_type" onDemandHandler="tContentMessageHandlermsg_template" onDemandStyle="Link" allowQBE="false" allowSorting="false" label="Message Template" showInSummary="true" htmlEncode="false" />
      <field name="error_template" type="String" allowQBE="false" allowSorting="false" label="Error Template" showInSummary="true" />
      <field name="msg_handler_name" type="String" allowQBE="false" allowSorting="false" label="Message Handler Name" showInSummary="true" />
      <field name="ctrl_cre_date" type="DateTime" dataFormatString="g" label="Creation Date" showInSummary="true" />
      <field name="ctrl_upd_date" type="DateTime" dataFormatString="g" label="Update Date" />
      <field name="ctrl_user" type="String" label="Last User Modified" length="25" />
      <field name="ContentType" type="String" label="Content Type" computed="true">
        <formula>select 'application/xml'</formula>
      </field>
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="t Content Message Handler">
        <headerText>$DefaultGridViewDescription</headerText>
        <dataFields>
          <dataField fieldName="msg_type" columns="50" />
          <dataField fieldName="msg_template" rows="5" />
          <dataField fieldName="error_template" rows="5" />
          <dataField fieldName="msg_handler_name" rows="5" />
          <dataField fieldName="ctrl_cre_date" columns="20" />
          <dataField fieldName="ctrl_upd_date" columns="20" />
          <dataField fieldName="ctrl_user" columns="25" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Message Handler">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="t Content Message Handler">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="msg_type" columns="50" />
              <dataField fieldName="msg_template" rows="5" />
              <dataField fieldName="error_template" rows="5" />
              <dataField fieldName="msg_handler_name" rows="5" />
              <dataField fieldName="ctrl_cre_date" columns="20" />
              <dataField fieldName="ctrl_upd_date" columns="20" />
              <dataField fieldName="ctrl_user" columns="25" />
              <dataField fieldName="ContentType" rows="5" hidden="true">
              </dataField>
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New t Content Message Handler">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New t Content Message Handler">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="msg_type" columns="50" />
              <dataField fieldName="msg_template" rows="5" />
              <dataField fieldName="error_template" rows="5" />
              <dataField fieldName="msg_handler_name" rows="5" />
              <dataField fieldName="ctrl_cre_date" columns="20" />
              <dataField fieldName="ctrl_upd_date" columns="20" />
              <dataField fieldName="ctrl_user" columns="25" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="grid1" />
        <action id="a8" commandName="Duplicate" commandArgument="createForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ContentMessageMonitor" conflictDetection="overwriteChanges" label="t Content Message Monitor" nativeSchema="dbo" nativeTableName="tContentMessageMonitor">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentMessageMonitor"."MSG_TYPE" "MSG_TYPE"
	,"tContentMessageMonitor"."EG_NAME" "EG_NAME"
	,"tContentMessageMonitor"."DATE" "DATE"
	,"tContentMessageMonitor"."INSTANCE" "INSTANCE"
	,"tContentMessageMonitor"."MESSAGES_CURR_HANDLED" "MESSAGES_CURR_HANDLED"
	,"tContentMessageMonitor"."MESSAGES_CURR_FAILED" "MESSAGES_CURR_FAILED"
	,"tContentMessageMonitor"."MESSAGES_CURR_UNHANDLED" "MESSAGES_CURR_UNHANDLED"
	,"tContentMessageMonitor"."DM_EG_STATUS" "DM_EG_STATUS"
	,"tContentMessageMonitor"."TIME_LAST_MESSAGE" "TIME_LAST_MESSAGE"
	,"tContentMessageMonitor"."TIME_EG_STARTED" "TIME_EG_STARTED"
	,"tContentMessageMonitor"."TIME_EG_ENDED" "TIME_EG_ENDED"
from "dbo"."tContentMessageMonitor" "tContentMessageMonitor"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="MSG_TYPE" type="String" label="Message Type" length="50" showInSummary="true" />
      <field name="EG_NAME" type="String" allowNulls="false" isPrimaryKey="true" label="Event Generator Name" length="50" showInSummary="true" />
      <field name="DATE" type="DateTime" allowNulls="false" isPrimaryKey="true" label="Date" showInSummary="true" />
      <field name="INSTANCE" type="Int32" allowNulls="false" isPrimaryKey="true" default="((1))" label="Instance" />
      <field name="MESSAGES_CURR_HANDLED" type="Int32" default="((0))" label="Messages Currently Handled" showInSummary="true" />
      <field name="MESSAGES_CURR_FAILED" type="Int32" default="((0))" label="Messages Currently Failed" showInSummary="true" />
      <field name="MESSAGES_CURR_UNHANDLED" type="Int32" default="((0))" label="Messages Currently Unhandled" />
      <field name="DM_EG_STATUS" type="String" label="Event Generator Status" length="10" computed="true">
        <formula>select case when DM_EG_STATUS = 'U' then 'Online'
                 when DM_EG_STATUS = 'P' then 'Pause'
          else 'Down' end</formula>
      </field>
      <field name="TIME_LAST_MESSAGE" type="DateTime" dataFormatString="g" label="Time of Last Message" />
      <field name="TIME_EG_STARTED" type="DateTime" dataFormatString="g" label="Time of Event Generator Start" />
      <field name="TIME_EG_ENDED" type="DateTime" dataFormatString="g" label="Time of Event Generator End" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Content Message Monitor" sortExpression="Date desc, Instance desc">
        <headerText>$DefaultGridViewDescription</headerText>
        <dataFields>
          <dataField fieldName="MSG_TYPE" columns="50" />
          <dataField fieldName="EG_NAME" columns="50" />
          <dataField fieldName="DATE" columns="10" />
          <dataField fieldName="INSTANCE" columns="15" />
          <dataField fieldName="MESSAGES_CURR_HANDLED" columns="15" />
          <dataField fieldName="MESSAGES_CURR_FAILED" columns="15" />
          <dataField fieldName="MESSAGES_CURR_UNHANDLED" columns="15" />
          <dataField fieldName="DM_EG_STATUS" columns="10" />
          <dataField fieldName="TIME_LAST_MESSAGE" columns="20" />
          <dataField fieldName="TIME_EG_STARTED" columns="20" />
          <dataField fieldName="TIME_EG_ENDED" columns="20" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Message Monitor">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="t Content Message Monitor">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="MSG_TYPE" columns="50" />
              <dataField fieldName="EG_NAME" columns="50" />
              <dataField fieldName="DATE" columns="10" />
              <dataField fieldName="INSTANCE" columns="15" />
              <dataField fieldName="MESSAGES_CURR_HANDLED" columns="15" />
              <dataField fieldName="MESSAGES_CURR_FAILED" columns="15" />
              <dataField fieldName="MESSAGES_CURR_UNHANDLED" columns="15" />
              <dataField fieldName="DM_EG_STATUS" columns="10" />
              <dataField fieldName="TIME_LAST_MESSAGE" columns="20" />
              <dataField fieldName="TIME_EG_STARTED" columns="20" />
              <dataField fieldName="TIME_EG_ENDED" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Content Message Monitor">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New t Content Message Monitor">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="MSG_TYPE" columns="50" />
              <dataField fieldName="EG_NAME" columns="50" />
              <dataField fieldName="DATE" columns="10" />
              <dataField fieldName="INSTANCE" columns="15" />
              <dataField fieldName="MESSAGES_CURR_HANDLED" columns="15" />
              <dataField fieldName="MESSAGES_CURR_FAILED" columns="15" />
              <dataField fieldName="MESSAGES_CURR_UNHANDLED" columns="15" />
              <dataField fieldName="DM_EG_STATUS" columns="10" />
              <dataField fieldName="TIME_LAST_MESSAGE" columns="20" />
              <dataField fieldName="TIME_EG_STARTED" columns="20" />
              <dataField fieldName="TIME_EG_ENDED" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="grid1" />
        <action id="a8" commandName="Duplicate" commandArgument="createForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ContentMessageSettings" conflictDetection="overwriteChanges" label="t Content Message Settings" nativeSchema="dbo" nativeTableName="tContentMessageSettings">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentMessageSettings"."PROPERTY_NAME" "PROPERTY_NAME"
	,"tContentMessageSettings"."VALUE" "VALUE"
	,"tContentMessageSettings"."CTRL_USER_ID" "CTRL_USER_ID"
	,"tContentMessageSettings"."CTRL_CRE_DATE" "CTRL_CRE_DATE"
	,"tContentMessageSettings"."CTRL_UPD_DATE" "CTRL_UPD_DATE"
	,"tContentMessageSettings"."CTRL_APP_NAME" "CTRL_APP_NAME"
from "dbo"."tContentMessageSettings" "tContentMessageSettings"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="PROPERTY_NAME" type="String" isPrimaryKey="true" label="Property Name" length="200" showInSummary="true" />
      <field name="VALUE" type="String" allowQBE="false" allowSorting="false" label="Value" showInSummary="true" />
      <field name="CTRL_USER_ID" type="String" label="Last User Modified" length="50" showInSummary="true" />
      <field name="CTRL_CRE_DATE" type="DateTime" dataFormatString="g" label="Creation Date" showInSummary="true" />
      <field name="CTRL_UPD_DATE" type="DateTime" dataFormatString="g" label="Update Date" showInSummary="true" />
      <field name="CTRL_APP_NAME" type="DateTime" dataFormatString="g" label="Last Application Update" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Content Message Settings">
        <headerText>$DefaultGridViewDescription</headerText>
        <dataFields>
          <dataField fieldName="PROPERTY_NAME" />
          <dataField fieldName="VALUE" rows="5" />
          <dataField fieldName="CTRL_USER_ID" columns="50" />
          <dataField fieldName="CTRL_CRE_DATE" columns="20" />
          <dataField fieldName="CTRL_UPD_DATE" columns="20" />
          <dataField fieldName="CTRL_APP_NAME" columns="20" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Message Settings">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="t Content Message Settings">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="PROPERTY_NAME" />
              <dataField fieldName="VALUE" rows="5" />
              <dataField fieldName="CTRL_USER_ID" columns="50" />
              <dataField fieldName="CTRL_CRE_DATE" columns="20" />
              <dataField fieldName="CTRL_UPD_DATE" columns="20" />
              <dataField fieldName="CTRL_APP_NAME" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Content Message Settings">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New t Content Message Settings">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="PROPERTY_NAME" />
              <dataField fieldName="VALUE" rows="5" />
              <dataField fieldName="CTRL_USER_ID" columns="50" />
              <dataField fieldName="CTRL_CRE_DATE" columns="20" />
              <dataField fieldName="CTRL_UPD_DATE" columns="20" />
              <dataField fieldName="CTRL_APP_NAME" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="grid1" />
        <action id="a8" commandName="Duplicate" commandArgument="createForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ContentMessageSubscribe" conflictDetection="overwriteChanges" label="t Content Message Subscribe" nativeSchema="dbo" nativeTableName="tContentMessageSubscribe">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tContentMessageSubscribe"."msg_id" "msg_id"
	,"tContentMessageSubscribe"."msg_type" "msg_type"
	,"tContentMessageSubscribe"."msg_content" "msg_content"
	,"tContentMessageSubscribe"."msg_status" "msg_status"
	,"tContentMessageSubscribe"."error_msg" "error_msg"
	,"tContentMessageSubscribe"."customer_id" "customer_id"
	,"tContentMessageSubscribe"."content_id" "content_id"
	,"tContentMessageSubscribe"."content_ver" "content_ver"
	,"tContentMessageSubscribe"."ctrl_cre_date" "ctrl_cre_date"
	,"tContentMessageSubscribe"."ctrl_upd_date" "ctrl_upd_date"
	,"tContentMessageSubscribe"."ctrl_app_name" "ctrl_app_name"
	,"tContentMessageSubscribe"."ctrl_user_id" "ctrl_user_id"
from "dbo"."tContentMessageSubscribe" "tContentMessageSubscribe"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="msg_id" type="Int32" isPrimaryKey="true" label="Message ID" />
      <field name="msg_type" type="String" label="Message Type" length="50" showInSummary="true" />
      <field name="msg_content" type="String" onDemand="true" sourceFields="msg_id" onDemandHandler="tContentMessageSubscribemsg_content" onDemandStyle="Link" allowQBE="false" allowSorting="false" label="Message Content" showInSummary="true" />
      <field name="msg_status" type="String" label="Message Status" length="1" showInSummary="true" computed="true">
        <formula>select case when msg_status = 'N' then 'New'
            when msg_status = 'P' then 'Processing'
            when msg_status = 'E' then 'Error'
            when msg_status = 'C' then 'Complete'
          else 'Other'
          end</formula>
      </field>
      <field name="error_msg" type="String" allowQBE="false" allowSorting="false" label="Error Message" showInSummary="true" />
      <field name="customer_id" type="String" label="Customer ID" length="12" showInSummary="true" />
      <field name="content_id" type="String" label="Content ID" length="12" />
      <field name="content_ver" type="Int32" label="Content Version" />
      <field name="ctrl_cre_date" type="DateTime" dataFormatString="g" label="Creation Date" />
      <field name="ctrl_upd_date" type="DateTime" dataFormatString="g" label="Update Date" />
      <field name="ctrl_app_name" type="String" label="Last Application Update" length="25" />
      <field name="ctrl_user_id" type="String" label="Last User Modified" length="25" />
      <field name="ContentType" type="String" label="Content Type" computed="true">
        <formula>select 'application/xml'</formula>
      </field>
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Content Message Subscribe">
        <headerText>$DefaultGridViewDescription</headerText>
        <dataFields>
          <dataField fieldName="msg_id" columns="15">
            <headerText>Subscribe Message ID</headerText>
          </dataField>
          <dataField fieldName="msg_type" columns="50" />
          <dataField fieldName="msg_content" rows="5" />
          <dataField fieldName="msg_status" columns="1" />
          <dataField fieldName="error_msg" rows="5" />
          <dataField fieldName="customer_id" columns="12" />
          <dataField fieldName="content_id" columns="12" />
          <dataField fieldName="content_ver" columns="15" />
          <dataField fieldName="ctrl_cre_date" columns="20" />
          <dataField fieldName="ctrl_upd_date" columns="20" />
          <dataField fieldName="ctrl_app_name" columns="25" />
          <dataField fieldName="ctrl_user_id" columns="25">
            <headerText>Publish Message ID</headerText>
          </dataField>
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content Message Subscribe">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="Content Message Subscribe">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="msg_id" columns="15" />
              <dataField fieldName="msg_type" columns="50" />
              <dataField fieldName="msg_content" rows="5" />
              <dataField fieldName="msg_status" columns="1" />
              <dataField fieldName="error_msg" rows="5" />
              <dataField fieldName="customer_id" columns="12" />
              <dataField fieldName="content_id" columns="12" />
              <dataField fieldName="content_ver" columns="15" />
              <dataField fieldName="ctrl_cre_date" columns="20" />
              <dataField fieldName="ctrl_upd_date" columns="20" />
              <dataField fieldName="ctrl_app_name" columns="25" />
              <dataField fieldName="ctrl_user_id" columns="25" />
              <dataField fieldName="ContentType" rows="5" hidden="true">
              </dataField>
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Content Message Subscribe">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New t Content Message Subscribe">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="msg_id" columns="15" />
              <dataField fieldName="msg_type" columns="50" />
              <dataField fieldName="msg_content" rows="5" />
              <dataField fieldName="msg_status" columns="1" />
              <dataField fieldName="error_msg" rows="5" />
              <dataField fieldName="customer_id" columns="12" />
              <dataField fieldName="content_id" columns="12" />
              <dataField fieldName="content_ver" columns="15" />
              <dataField fieldName="ctrl_cre_date" columns="20" />
              <dataField fieldName="ctrl_upd_date" columns="20" />
              <dataField fieldName="ctrl_app_name" columns="25" />
              <dataField fieldName="ctrl_user_id" columns="25" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="grid1" />
        <action id="a8" commandName="Duplicate" commandArgument="createForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
        <action id="a5" />
        <action id="a6" commandName="Import" commandArgument="createForm1" />
        <action id="a7" commandName="DataSheet" />
        <action id="a8" commandName="Grid" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="Customer" conflictDetection="overwriteChanges" label="Customer" nativeSchema="dbo" nativeTableName="tCustomer">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tCustomer"."CustomerID" "CustomerID"
	,"tCustomer"."CompanyID" "CompanyID"
	,"Company"."CompanyName" "CompanyName"
	,"tCustomer"."CustomerCode" "CustomerCode"
	,"tCustomer"."CustomerName" "CustomerName"
	,"tCustomer"."Enabled" "Enabled"
	,"tCustomer"."Consignment" "Consignment"
	,"tCustomer"."CreatedBy" "CreatedBy"
	,"tCustomer"."CreatedOn" "CreatedOn"
	,"tCustomer"."ModifiedBy" "ModifiedBy"
	,"tCustomer"."ModifiedOn" "ModifiedOn"
from "dbo"."tCustomer" "tCustomer"
	left join "dbo"."tCompany" "Company" on "tCustomer"."CompanyID" = "Company"."CompanyID"
]]></text>
      </command>
      <command id="CustomerIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="CustomerID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="CustomerID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Customer ID" readOnly="true" />
      <field name="CompanyID" type="Int32" allowNulls="false" label="Company ID" showInSummary="true">
        <items style="Lookup" dataController="Company" newDataView="createForm1" dataValueField="CompanyID" dataTextField="CompanyName" />
      </field>
      <field name="CompanyName" type="String" readOnly="true" label="Company Name" length="50" />
      <field name="CustomerCode" type="String" allowNulls="false" label="Customer Code" length="50" showInSummary="true" />
      <field name="CustomerName" type="String" allowNulls="false" label="Customer Name" length="100" showInSummary="true" />
      <field name="Enabled" type="Boolean" allowNulls="false" default="((0))" label="Enabled" showInSummary="true" />
      <field name="Consignment" type="Boolean" allowNulls="false" default="((0))" label="Consignment" showInSummary="true" />
      <field name="CreatedBy" type="String" label="Created By" length="50" />
      <field name="CreatedOn" type="DateTime" dataFormatString="g" label="Created On" />
      <field name="ModifiedBy" type="String" label="Modified By" length="50" />
      <field name="ModifiedOn" type="DateTime" dataFormatString="g" label="Modified On" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Customers">
        <headerText />
        <dataFields>
          <dataField fieldName="CompanyID" aliasFieldName="CompanyName" />
          <dataField fieldName="CustomerCode" columns="50" />
          <dataField fieldName="CustomerName" />
          <dataField fieldName="Consignment" />
          <dataField fieldName="Enabled" />
          <dataField fieldName="CreatedBy" columns="50" />
          <dataField fieldName="CreatedOn" columns="20" />
          <dataField fieldName="ModifiedBy" columns="50" />
          <dataField fieldName="ModifiedOn" columns="20" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Customer">
        <headerText />
        <categories>
          <category id="c1" headerText="Customer">
            <description />
            <dataFields>
              <dataField fieldName="CompanyID" aliasFieldName="CompanyName" hyperlinkFormatString="~/pages/Company?CompanyID={CompanyID}&amp;_controller=Company&amp;_command=Select&amp;_argument=editForm1" />
              <dataField fieldName="CustomerCode" columns="50" />
              <dataField fieldName="CustomerName" />
              <dataField fieldName="Enabled" />
              <dataField fieldName="CustomerID" columns="15" hidden="true" />
            </dataFields>
          </category>
          <category headerText="Options" id="c3">
            <dataFields>
              <dataField fieldName="Consignment" />
            </dataFields>
          </category>
          <category headerText="Last Modified" id="c2" newColumn="true">
            <dataFields>
              <dataField fieldName="ModifiedBy" columns="50" />
              <dataField fieldName="ModifiedOn" columns="20" />
              <dataField fieldName="CreatedBy" columns="50" />
              <dataField fieldName="CreatedOn" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Customer">
        <headerText />
        <categories>
          <category id="c1" headerText="Customer">
            <description />
            <dataFields>
              <dataField fieldName="CompanyID" aliasFieldName="CompanyName" />
              <dataField fieldName="CustomerCode" columns="50" />
              <dataField fieldName="CustomerName" />
              <dataField fieldName="Enabled" />
            </dataFields>
          </category>
          <category headerText="Options" id="c2">
            <dataFields>
              <dataField fieldName="Consignment" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a3" commandName="Cancel" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
        <action commandName="SQL" id="a100" headerText="Get History">
          <data>[dbo].[pConsignmentStockConsumeGet] 
	@BusinessRules_UserId,
	@CustomerID</data>
        </action>
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
      <actionGroup id="ag100" scope="ActionBar" headerText="Action Flat" flat="true">
        <action commandName="SQL" whenKeySelected="true" id="a100" headerText="Get History">
          <data>EXEC [TimberSmartWebPortal].[dbo].[pConsignmentStockConsumeGet] @BusinessRules_UserId, @CustomerID
   </data>
        </action>
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="Product" conflictDetection="overwriteChanges" label="Product" nativeSchema="dbo" nativeTableName="tProduct">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"tProduct"."ProductID" "ProductID"
	,"tProduct"."ProductCode" "ProductCode"
	,"tProduct"."ProductName" "ProductName"
	,"tProduct"."CategoryCode" "CategoryCode"
	,"tProduct"."CategoryName" "CategoryName"
	,"tProduct"."Width" "Width"
	,"tProduct"."Thickness" "Thickness"
	,"tProduct"."Length" "Length"
from "dbo"."tProduct" "tProduct"
]]></text>
      </command>
      <command id="ProductIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="ProductID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="ProductID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Product ID" readOnly="true" />
      <field name="ProductCode" type="String" allowNulls="false" label="Product Code" length="50" showInSummary="true" />
      <field name="ProductName" type="String" allowNulls="false" label="Product Name" length="70" showInSummary="true" />
      <field name="CategoryCode" type="String" allowNulls="false" label="Category Code" length="5" showInSummary="true" />
      <field name="CategoryName" type="String" allowNulls="false" label="Category Name" length="50" showInSummary="true" />
      <field name="Width" type="Decimal" allowNulls="false" label="Width" showInSummary="true" />
      <field name="Thickness" type="Decimal" allowNulls="false" label="Thickness" />
      <field name="Length" type="Decimal" allowNulls="false" label="Length" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Product">
        <headerText />
        <dataFields>
          <dataField fieldName="ProductCode" columns="50" />
          <dataField fieldName="ProductName" />
          <dataField fieldName="CategoryCode" columns="5" />
          <dataField fieldName="CategoryName" columns="50" />
          <dataField fieldName="Width" columns="15" />
          <dataField fieldName="Thickness" columns="15" />
          <dataField fieldName="Length" columns="15" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Product">
        <headerText />
        <categories>
          <category id="c1" headerText="Product">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="ProductCode" columns="50" />
              <dataField fieldName="ProductName" />
              <dataField fieldName="CategoryCode" columns="5" />
              <dataField fieldName="CategoryName" columns="50" />
              <dataField fieldName="Width" columns="15" />
              <dataField fieldName="Thickness" columns="15" />
              <dataField fieldName="Length" columns="15" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="UserRoles" conflictDetection="overwriteChanges" label="User Roles" nativeSchema="dbo" nativeTableName="UserRoles">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"UserRoles"."UserID" "UserID"
	,"User"."UserName" "UserName"
	,"UserRoles"."RoleID" "RoleID"
	,"Role"."RoleName" "RoleName"
from "dbo"."UserRoles" "UserRoles"
	left join "dbo"."Users" "User" on "UserRoles"."UserID" = "User"."UserID"
	left join "dbo"."Roles" "Role" on "UserRoles"."RoleID" = "Role"."RoleID"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="UserID" type="Int32" allowNulls="false" isPrimaryKey="true" label="User ID" showInSummary="true">
        <items style="Lookup" dataController="Users" newDataView="createForm1" dataValueField="UserID" dataTextField="UserName" dataView="grid1" />
      </field>
      <field name="UserName" type="String" readOnly="true" label="User Name" length="128" />
      <field name="RoleID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Role ID" showInSummary="true">
        <items style="Lookup" dataController="Roles" newDataView="createForm1" dataValueField="RoleID" dataTextField="RoleName" dataView="grid1" />
      </field>
      <field name="RoleName" type="String" readOnly="true" label="Role Name" length="50" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="User Roles">
        <headerText />
        <dataFields>
          <dataField fieldName="UserID" aliasFieldName="UserName" />
          <dataField fieldName="RoleID" aliasFieldName="RoleName" hyperlinkFormatString="~/pages/Roles?RoleID={RoleID}&amp;_controller=Roles&amp;_command=Select&amp;_argument=editForm1" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review User Role">
        <headerText />
        <categories>
          <category id="c1" headerText="User Role">
            <description />
            <dataFields>
              <dataField fieldName="UserID" aliasFieldName="UserName" hyperlinkFormatString="~/pages/Users?UserID={UserID}&amp;_controller=Users&amp;_command=Select&amp;_argument=editForm1" />
              <dataField fieldName="RoleID" aliasFieldName="RoleName" hyperlinkFormatString="~/pages/Roles?RoleID={RoleID}&amp;_controller=Roles&amp;_command=Select&amp;_argument=editForm1" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New User Role">
        <headerText />
        <categories>
          <category id="c1" headerText="User Role">
            <description />
            <dataFields>
              <dataField fieldName="UserID" aliasFieldName="UserName" />
              <dataField fieldName="RoleID" aliasFieldName="RoleName" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="createForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="Users" conflictDetection="overwriteChanges" label="Users" nativeSchema="dbo" nativeTableName="Users">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"Users"."UserID" "UserID"
	,"Users"."UserName" "UserName"
	,"Users"."Password" "Password"
	,"Users"."Email" "Email"
	,"Users"."Comment" "Comment"
	,"Users"."PasswordQuestion" "PasswordQuestion"
	,"Users"."PasswordAnswer" "PasswordAnswer"
	,"Users"."IsApproved" "IsApproved"
	,"Users"."LastActivityDate" "LastActivityDate"
	,"Users"."LastLoginDate" "LastLoginDate"
	,"Users"."LastPasswordChangedDate" "LastPasswordChangedDate"
	,"Users"."CreationDate" "CreationDate"
	,"Users"."IsLockedOut" "IsLockedOut"
	,"Users"."LastLockedOutDate" "LastLockedOutDate"
	,"Users"."FailedPasswordAttemptCount" "FailedPasswordAttemptCount"
	,"Users"."FailedPasswordAttemptWindowStart" "FailedPasswordAttemptWindowStart"
	,"Users"."FailedPasswordAnswerAttemptCount" "FailedPasswordAnswerAttemptCount"
	,"Users"."FailedPasswordAnswerAttemptWindowStart" "FailedPasswordAnswerAttemptWindowStart"
	,"Users"."CustomerID" "CustomerID"
	,"tCustomer"."CustomerName" "CustomerName"
from "dbo"."Users" "Users"
	left join "dbo"."tCustomer" "tCustomer" on "Users"."CustomerID" = "tCustomer"."CustomerID"
]]></text>
      </command>
      <command id="UserIDIdentityCommand" type="Text" event="Inserted">
        <text><![CDATA[select @@identity]]></text>
        <output>
          <fieldOutput fieldName="UserID" />
        </output>
      </command>
    </commands>
    <fields>
      <field name="UserID" type="Int32" allowNulls="false" isPrimaryKey="true" label="User ID" readOnly="true" />
      <field name="UserName" type="String" allowNulls="false" label="User Name" length="128" showInSummary="true" />
      <field name="Password" type="String" allowNulls="false" label="Password" length="128" />
      <field name="Email" type="String" label="Email" length="128" showInSummary="true" />
      <field name="Comment" type="String" allowQBE="false" allowSorting="false" label="Comment" showInSummary="true" />
      <field name="PasswordQuestion" type="String" label="Password Question" length="256" />
      <field name="PasswordAnswer" type="String" label="Password Answer" length="128" />
      <field name="IsApproved" type="Boolean" allowNulls="false" default="((0))" label="Is Approved" showInSummary="true" />
      <field name="LastActivityDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Activity Date" showInSummary="true" readOnly="true" />
      <field name="LastLoginDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Login Date" readOnly="true" />
      <field name="LastPasswordChangedDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Password Changed Date" readOnly="true" />
      <field name="CreationDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Creation Date" readOnly="true" />
      <field name="IsLockedOut" type="Boolean" allowNulls="false" default="((0))" label="Is Locked Out" />
      <field name="LastLockedOutDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Locked Out Date" readOnly="true" />
      <field name="FailedPasswordAttemptCount" type="Int32" allowNulls="false" default="((0))" label="Failed Password Attempt Count" />
      <field name="FailedPasswordAttemptWindowStart" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Failed Password Attempt Window Start" />
      <field name="FailedPasswordAnswerAttemptCount" type="Int32" allowNulls="false" default="((0))" label="Failed Password Answer Attempt Count" />
      <field name="FailedPasswordAnswerAttemptWindowStart" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Failed Password Answer Attempt Window Start" />
      <field name="CustomerID" type="Int32" label="Customer">
        <items style="Lookup" dataController="Customer" newDataView="createForm1" dataValueField="CustomerID" dataTextField="CustomerName" dataView="grid1" />
      </field>
      <field name="CustomerName" type="String" readOnly="true" label="Customer Name" length="100" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Users">
        <headerText />
        <dataFields>
          <dataField fieldName="UserName" />
          <dataField fieldName="CustomerID" aliasFieldName="CustomerName" hyperlinkFormatString="~/pages/Customer?CustomerID={CustomerID}&amp;_controller=Customer&amp;_command=Select&amp;_argument=editForm1" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review User">
        <headerText />
        <categories>
          <category id="c1" headerText="User">
            <description />
            <dataFields>
              <dataField fieldName="UserName" />
              <dataField fieldName="Email" />
              <dataField fieldName="IsApproved" />
              <dataField fieldName="IsLockedOut" />
              <dataField fieldName="Comment" rows="5" />
            </dataFields>
          </category>
          <category headerText="Customer" id="c4">
            <dataFields>
              <dataField fieldName="CustomerID" aliasFieldName="CustomerName" hyperlinkFormatString="~/pages/Customer?CustomerID={CustomerID}&amp;_controller=Customer&amp;_command=Select&amp;_argument=editForm1" />
            </dataFields>
          </category>
          <category headerText="Password" id="c2" newColumn="true">
            <dataFields>
              <dataField fieldName="Password" textMode="Password" />
              <dataField fieldName="PasswordQuestion" hidden="true" />
              <dataField fieldName="PasswordAnswer" textMode="Password" hidden="true" />
            </dataFields>
          </category>
          <category headerText="Last Modified" id="c3">
            <dataFields>
              <dataField fieldName="CreationDate" columns="20" />
              <dataField fieldName="LastLoginDate" columns="20" />
              <dataField fieldName="LastActivityDate" columns="20" />
              <dataField fieldName="LastPasswordChangedDate" columns="20" />
              <dataField fieldName="LastLockedOutDate" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New User">
        <headerText />
        <categories>
          <category id="c1" headerText="User">
            <description />
            <dataFields>
              <dataField fieldName="UserName" />
              <dataField fieldName="Email" />
              <dataField fieldName="Comment" rows="5" />
              <dataField fieldName="IsApproved" />
              <dataField fieldName="IsLockedOut" />
            </dataFields>
          </category>
          <category headerText="Customer" id="c4">
            <dataFields>
              <dataField fieldName="CustomerID" aliasFieldName="CustomerName" />
            </dataFields>
          </category>
          <category headerText="Password" id="c2">
            <dataFields>
              <dataField fieldName="Password" textMode="Password" />
              <dataField fieldName="PasswordQuestion" hidden="true" />
              <dataField fieldName="PasswordAnswer" textMode="Password" hidden="true" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" commandArgument="createForm1" headerText="New User" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a2" commandName="Delete" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" whenView="createForm1" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" commandArgument="createForm1" />
      </actionGroup>
      <actionGroup id="ag3" scope="ActionBar" headerText="New" flat="true">
        <action id="a1" commandName="New" commandArgument="createForm1" cssClass="NewIcon" headerText="New User" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" whenView="grid1" />
        <action id="a2" whenKeySelected="true" commandName="Delete" cssClass="DeleteIcon" whenView="grid1" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
    <businessRules>
      <rule id="r100" commandName="Insert|Update" type="Code" phase="Before" />
    </businessRules>
  </dataController>
  <dataController name="ConsignmentStockDashboard" conflictDetection="overwriteChanges" label="Consignment Stock Dashboard" nativeSchema="dbo" nativeTableName="vConsignmentStockDashboard" allowAnnotations="true">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"vConsignmentStockDashboard"."CustomerID" "CustomerID"
	,"tCustomer"."CustomerName" "CustomerCustomerName"
	,"vConsignmentStockDashboard"."CategoryCode" "CategoryCode"
	,"vConsignmentStockDashboard"."CategoryName" "CategoryName"
	,"vConsignmentStockDashboard"."Width" "Width"
	,"vConsignmentStockDashboard"."Thickness" "Thickness"
	,"vConsignmentStockDashboard"."Length" "Length"
	,"vConsignmentStockDashboard"."Packets" "Packets"
	,"vConsignmentStockDashboard"."Cube" "Cube"
	,"vConsignmentStockDashboard"."Lineal" "Lineal"
	,"vConsignmentStockDashboard"."Pieces" "Pieces"
from "dbo"."vConsignmentStockDashboard" "vConsignmentStockDashboard"
	left join "dbo"."tCustomer" "tCustomer" on "vConsignmentStockDashboard"."CustomerID" = "tCustomer"."CustomerID"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="CustomerID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Customer ID" showInSummary="true">
        <items style="Lookup" dataController="Customer" newDataView="createForm1" dataValueField="CustomerID" dataTextField="CustomerName" />
      </field>
      <field name="CustomerCustomerName" type="String" readOnly="true" label="Customer Name" length="100" roles="Admins" showInSummary="true" />
      <field name="CategoryCode" type="String" allowNulls="false" isPrimaryKey="true" label="Category Code" length="5" showInSummary="true" />
      <field name="CategoryName" type="String" allowNulls="false" label="Category Name" length="50" showInSummary="true" hidden="false" />
      <field name="Width" type="Decimal" allowNulls="false" isPrimaryKey="true" label="Width" />
      <field name="Thickness" type="Decimal" allowNulls="false" isPrimaryKey="true" label="Thickness" />
      <field name="Length" type="Decimal" allowNulls="false" isPrimaryKey="true" label="Length" />
      <field name="Packets" type="Decimal" label="Packets" showInSummary="true" />
      <field name="Cube" type="Decimal" label="Cube" />
      <field name="Lineal" type="Decimal" label="Lineal" />
      <field name="Pieces" type="Decimal" label="Pieces" />
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Consignment Stock Dashboard">
        <headerText />
        <dataFields>
          <dataField fieldName="CustomerCustomerName" />
          <dataField fieldName="CategoryName" columns="50" tag="pivot1-row1-column &#xD;&#xA;pivot2-row1-columnstacked&#xD;&#xA;" />
          <dataField fieldName="Width" columns="15" />
          <dataField fieldName="Thickness" columns="15" />
          <dataField fieldName="Length" columns="15" tag="pivot2-col1" />
          <dataField fieldName="Packets" columns="15" tag=" pivot1-val1-sum&#xD;&#xA;pivot2-val1-sum" />
          <dataField fieldName="Cube" columns="15" />
          <dataField fieldName="Lineal" columns="15" />
          <dataField fieldName="Pieces" columns="15" />
          <dataField fieldName="CategoryCode" columns="5" hidden="true">
          </dataField>
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Consignment Stock Dashboard">
        <headerText />
        <categories>
          <category id="c1" headerText="Consignment Stock Dashboard">
            <description />
            <dataFields>
              <dataField fieldName="CustomerID" aliasFieldName="CustomerCustomerName" hyperlinkFormatString="~/pages/Customer?CustomerID={CustomerID}&amp;_controller=Customer&amp;_command=Select&amp;_argument=editForm1" />
              <dataField fieldName="CategoryCode" columns="5" />
              <dataField fieldName="CategoryName" columns="50" />
              <dataField fieldName="Width" columns="15" />
              <dataField fieldName="Thickness" columns="15" />
              <dataField fieldName="Length" columns="15" />
              <dataField fieldName="Packets" columns="15" />
              <dataField fieldName="Cube" columns="15" />
              <dataField fieldName="Lineal" columns="15" />
              <dataField fieldName="Pieces" columns="15" />
            </dataFields>
          </category>
          <category headerText="Customer" newColumn="true" id="c2">
            <dataFields>
              <dataField fieldName="CustomerCustomerName" rows="5" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a5" />
        <action id="a6" commandName="Import" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="ConsignmentUsageDashboard" conflictDetection="overwriteChanges" label="Consignment Usage Dashboard" nativeSchema="dbo" nativeTableName="vConsignmentUsageDashboard">
    <commands>
      <command id="command1" type="Text">
        <text><![CDATA[
select
	"vConsignmentUsageDashboard"."CustomerID" "CustomerID"
	,"tCustomer"."CustomerName" "CustomerCustomerName"
	,"vConsignmentUsageDashboard"."ProductCategoryCode" "ProductCategoryCode"
	,"vConsignmentUsageDashboard"."CategoryName" "CategoryName"
	,"vConsignmentUsageDashboard"."ProductWidth" "ProductWidth"
	,"vConsignmentUsageDashboard"."ProductThickness" "ProductThickness"
	,"vConsignmentUsageDashboard"."ProductLength" "ProductLength"
	,"vConsignmentUsageDashboard"."ConsumedOn" "ConsumedOn"
	,"vConsignmentUsageDashboard"."Packets" "Packets"
from "dbo"."vConsignmentUsageDashboard" "vConsignmentUsageDashboard"
	left join "dbo"."tCustomer" "tCustomer" on "vConsignmentUsageDashboard"."CustomerID" = "tCustomer"."CustomerID"
]]></text>
      </command>
    </commands>
    <fields>
      <field name="CustomerID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Customer ID" showInSummary="true">
        <items style="Lookup" dataController="Customer" newDataView="createForm1" dataValueField="CustomerID" dataTextField="CustomerName" />
      </field>
      <field name="CustomerCustomerName" type="String" readOnly="true" label="Customer Name" length="100" roles="Admins" showInSummary="true" />
      <field name="ProductCategoryCode" type="String" isPrimaryKey="true" label="Product Category Code" length="5" showInSummary="true" hidden="true" />
      <field name="CategoryName" type="String" label="Category Name" length="50" showInSummary="true" />
      <field name="ProductWidth" type="Decimal" isPrimaryKey="true" label="Width" showInSummary="true" />
      <field name="ProductThickness" type="Decimal" isPrimaryKey="true" label="Thickness" showInSummary="true" />
      <field name="ProductLength" type="Decimal" isPrimaryKey="true" label="Length" showInSummary="true" />
      <field name="ConsumedOn" type="DateTime" allowNulls="false" isPrimaryKey="true" label="Consumed On" showInSummary="true" />
      <field name="Packets" type="Decimal" label="Packets" showInSummary="true" />
      <field name="WidthAndThickness" type="String" allowNulls="false" label="Width And Thickness" allowQBE="false" allowSorting="false" computed="true" htmlEncode="false" hidden="true">
        <formula>Cast(Cast([ProductWidth] as int) as nvarchar(10)) + Cast(Cast([ProductThickness] as int) as nvarchar(10))</formula>
      </field>
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Consignment Usage Dashboard" sortExpression="ConsumedOn Desc, CategoryName, ProductWidth, ProductThickness, ProductLength">
        <headerText />
        <dataFields>
          <dataField fieldName="CustomerID" aliasFieldName="CustomerCustomerName" />
          <dataField fieldName="CustomerCustomerName" />
          <dataField fieldName="ConsumedOn" columns="10" tag="pivot1-row1-year-columnstacked&#xD;&#xA;pivot1-row2-quarter-all&#xD;&#xA;pivot2-row1-year-columnstacked&#xD;&#xA;pivot2-row2-week-all&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
          <dataField fieldName="CategoryName" columns="50" tag="pivot1-col1&#xD;&#xA;pivot2-col1&#xD;&#xA;pivot3-pie-row1" />
          <dataField fieldName="ProductWidth" columns="15" />
          <dataField fieldName="ProductThickness" columns="15" />
          <dataField fieldName="ProductLength" columns="15" />
          <dataField fieldName="Packets" columns="15" tag="pivot1-val1-sum&#xD;&#xA;pivot2-val1-sum&#xD;&#xA;pivot3-val1-sum" />
          <dataField fieldName="ProductCategoryCode" columns="5" hidden="true" />
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Consignment Usage Dashboard">
        <headerText />
        <categories>
          <category id="c1" headerText="Consignment Usage Dashboard">
            <description />
            <dataFields>
              <dataField fieldName="CustomerID" aliasFieldName="CustomerCustomerName" hyperlinkFormatString="~/pages/Customer?CustomerID={CustomerID}&amp;_controller=Customer&amp;_command=Select&amp;_argument=editForm1" />
              <dataField fieldName="ConsumedOn" columns="10" />
              <dataField fieldName="CategoryName" columns="50" />
              <dataField fieldName="ProductWidth" columns="15" />
              <dataField fieldName="ProductThickness" columns="15" />
              <dataField fieldName="ProductLength" columns="15" />
              <dataField fieldName="Packets" columns="15" />
            </dataFields>
          </category>
          <category headerText="Customer" id="c2" newColumn="true">
            <dataFields>
              <dataField fieldName="CustomerCustomerName" />
              <dataField fieldName="WidthAndThickness" rows="5" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
    </actions>
  </dataController>
  <dataController name="MyProfile" conflictDetection="overwriteChanges" label="My Profile" handler="MyProfileBusinessRules">
    <commands />
    <fields>
      <field name="UserName" type="String" allowNulls="false" label="^UserName^User Name^UserName^" />
      <field name="RememberMe" type="Boolean" allowNulls="false" default="0" label="^RememberMe^Remember me next time^RememberMe^">
        <items style="CheckBox" />
      </field>
      <field name="Password" type="String" allowNulls="false" label="^Password^Password^Password^" />
      <field name="ConfirmPassword" type="String" allowNulls="false" label="^ConfirmPassword^Confirm Password^ConfirmPassword^" />
      <field name="OldPassword" type="String" allowNulls="false" label="^OldPassword^Old Password^OldPassword^" />
      <field name="Email" type="String" label="^Email^Email^Email^" allowNulls="false" />
      <field name="PasswordQuestion" type="String" label="^PasswordQuestion^Password Question^PasswordQuestion^" allowNulls="false" />
      <field name="PasswordAnswer" type="String" label="^PasswordAnswer^Password Answer^PasswordAnswer^" allowNulls="false" />
    </fields>
    <views>
      <view id="loginForm" type="Form" access="Public" label="^LoginLink^Login^LoginLink^">
        <categories>
          <category id="c1" headerText="" newColumn="true">
            <dataFields>
              <dataField fieldName="UserName" />
              <dataField fieldName="Password" textMode="Password" />
              <dataField fieldName="RememberMe" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="signUpForm" type="Form" commandId="command1" access="Public" label="^SignUpViewLabel^Account Sign Up^SignUpViewLabel^">
        <headerText>^SignUpViewHeaderText^Please fill this form and click OK button to sign up for an account. Click Cancel to return to the previous screen.^SignUpViewHeaderText^</headerText>
        <categories>
          <category id="c1" headerText="^SignUpViewNewUserInfoCategoryHeaderText^New User Information^SignUpViewNewUserInfoCategoryHeaderText^" newColumn="true">
            <description>^SignUpViewNewUserInfoCategoryDescription^Please enter user name and password. Note that password must be at least 7 characters long and include one non-alphanumeric character. Only approved users will be able to login into the website.^SignUpViewNewUserInfoCategoryDescription^</description>
            <dataFields>
              <dataField fieldName="UserName" columns="20" />
              <dataField fieldName="Password" columns="20" textMode="Password" />
              <dataField fieldName="ConfirmPassword" columns="20" textMode="Password" />
            </dataFields>
          </category>
          <category id="c2" headerText="^SignUpViewPasswordRecoveryCategoryHeaderText^Password Recovery^SignUpViewPasswordRecoveryCategoryHeaderText^">
            <description>
                        
                        ^SignUpViewPasswordRecoveryCategoryDescription^These fields are required to help you to recover a forgotten password. During the recovery process you will be asked to enter a user name. 
						If a user account exists then a security question is requested to be answered. A correct answer will trigger an email with a temporary password send to the registered email.^SignUpViewPasswordRecoveryCategoryDescription^
                      
                      </description>
            <dataFields>
              <dataField fieldName="Email" />
              <dataField fieldName="PasswordQuestion" />
              <dataField fieldName="PasswordAnswer" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="passwordRequestForm" type="Form" commandId="command1" access="Public" label="^PasswordRequestViewLabel^Password Recovery: Step 1 of 2^PasswordRequestViewLabel^">
        <headerText>^PasswordRequestViewHeaderText^Please fill this form and click Continue button to recover the forgotten password. Click Cancel to return to the previous screen.^PasswordRequestViewHeaderText^</headerText>
        <categories>
          <category id="c1" headerText="^PasswordRequestViewForgotPasswordCategoryHeaderText^Forgot your password?^PasswordRequestViewForgotPasswordCategoryHeaderText^" newColumn="true">
            <description>^PasswordRequestViewForgotPasswordCategoryDescription^Please enter a user name. &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;^PasswordRequestViewForgotPasswordCategoryDescription^</description>
            <dataFields>
              <dataField fieldName="UserName" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="identityConfirmationForm" type="Form" commandId="command1" access="Public" label="^IdentityConfirmViewLabel^Password Recovery: Step 2 of 2^IdentityConfirmViewLabel^">
        <headerText>^IdentityConfirmViewHeaderText^Please fill this form and click Submit button to recover the forgotten password. Click Cancel to return to the previous screen.^IdentityConfirmViewHeaderText^</headerText>
        <categories>
          <category id="c1" headerText="^IdentityConfirmationViewIdentityConfirmCategoryHeaderText^Identity Confirmation^IdentityConfirmationViewIdentityConfirmCategoryHeaderText^" newColumn="true">
            <description>^IdentityConfirmationViewIdentityConfirmCategoryDescription^Answer the following question to receive your password. &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;^IdentityConfirmationViewIdentityConfirmCategoryDescription^</description>
            <dataFields>
              <dataField fieldName="UserName" columns="20" readOnly="true" />
              <dataField fieldName="PasswordQuestion" readOnly="true" />
              <dataField fieldName="PasswordAnswer" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="myAccountForm" type="Form" commandId="command1" label="^MyAccountViewLabel^My Account^MyAccountViewLabel^">
        <headerText>^MyAccountViewHeaderText^Please review your membership information below. Click Update My Account to change this record, or click Cancel to return back.^MyAccountViewHeaderText^</headerText>
        <categories>
          <category id="c1" headerText="^MyAccountViewCurrentPasswordCategoryHeaderText^1. Current Password^MyAccountViewCurrentPasswordCategoryHeaderText^" newColumn="true">
            <description>^MyAccountViewCurrentPasswordCategoryDescription^Please enter your current password to create new password, update your email address, or change password recovery question and answer.^MyAccountViewCurrentPasswordCategoryDescription^</description>
            <dataFields>
              <dataField fieldName="UserName" readOnly="true" />
              <dataField fieldName="OldPassword" columns="20" textMode="Password">
                <headerText>^Password^Password^Password^</headerText>
              </dataField>
            </dataFields>
          </category>
          <category id="c2" headerText="^MyAccountViewNewPasswordCategoryHeaderText^2. New Password (Optional)^MyAccountViewNewPasswordCategoryHeaderText^">
            <description>^MyAccountViewNewPasswordCategoryDescription^Please enter new password. Note that password must be at least 7 characters long and include one non-alphanumeric character.^MyAccountViewNewPasswordCategoryDescription^</description>
            <dataFields>
              <dataField fieldName="Password" columns="20" textMode="Password">
                <headerText>^NewPassword^New Password^NewPassword^</headerText>
              </dataField>
              <dataField fieldName="ConfirmPassword" columns="20" textMode="Password">
                <headerText>^ConfirmNewPassword^Confirm New Password^ConfirmNewPassword^</headerText>
              </dataField>
            </dataFields>
          </category>
          <category id="c3" headerText="^MyAccountViewPasswordRecoveryCategoryHeaderText^3. Email &amp; Password Recovery (Optional)^MyAccountViewPasswordRecoveryCategoryHeaderText^">
            <description>
                        
                        ^MyAccountViewPasswordRecoveryCategoryDescription^During the recovery of a forgotten password you will be asked to enter your user name. 
						If a user account exists then a password question must be answered. A correct answer will trigger an email with a temporary password send to you.^MyAccountViewPasswordRecoveryCategoryDescription^
                      
                      </description>
            <dataFields>
              <dataField fieldName="Email" />
              <dataField fieldName="PasswordQuestion" />
              <dataField fieldName="PasswordAnswer">
                <headerText>^MaskedPasswordAnswer^Password Answer (not displayed for your protection)^MaskedPasswordAnswer^</headerText>
              </dataField>
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Form">
        <action id="a1" whenLastCommandName="New" whenLastCommandArgument="signUpForm" commandName="Insert" commandArgument="SignUp" headerText="^SignUp^Sign Up^SignUp^" />
        <action id="a2" whenLastCommandName="New" whenLastCommandArgument="signUpForm" commandName="Cancel" />
        <action id="a3" whenLastCommandName="Insert" whenLastCommandArgument="SignUp" commandName="Cancel" />
        <action id="a4" whenLastCommandName="New" whenLastCommandArgument="passwordRequestForm" commandName="Cancel" />
        <action id="a5" whenLastCommandName="New" whenLastCommandArgument="passwordRequestForm" commandName="Custom" commandArgument="RequestPassword" headerText="^RequestPasswordActionHeaderText^Next^RequestPasswordActionHeaderText^" />
        <action id="a6" whenLastCommandName="Edit" whenLastCommandArgument="identityConfirmationForm" commandName="Custom" commandArgument="BackToRequestPassword" headerText="^BackToRequestPasswordActionHeaderText^Back^BackToRequestPasswordActionHeaderText^" causesValidation="false" />
        <action id="a7" whenLastCommandName="Edit" whenLastCommandArgument="identityConfirmationForm" commandName="Custom" commandArgument="ConfirmIdentity" headerText="^ConfirmIdentityActionHeaderText^Finish^ConfirmIdentityActionHeaderText^" />
        <action id="a8" whenLastCommandName="Edit" whenLastCommandArgument="myAccountForm" commandName="Update" headerText="^UpdateMyAccountActionHeaderText^Update My Account^UpdateMyAccountActionHeaderText^" causesValidation="false" />
        <action id="a9" whenLastCommandName="Edit" whenLastCommandArgument="myAccountForm" commandName="Cancel" />
        <action id="a10" commandName="Custom" headerText="^LoginButton^Login^LoginButton^" commandArgument="Login" whenLastCommandName="New" whenLastCommandArgument="loginForm" causesValidation="true" />
        <action id="a11" commandName="Custom" headerText="^SignUpNow^Sign up now^SignUpNow^" commandArgument="SignUp" whenLastCommandName="New" whenLastCommandArgument="loginForm" causesValidation="false" />
        <action id="a12" commandName="Custom" headerText="^ForgotYourPassword^Forgot your password?^ForgotYourPassword^" commandArgument="ForgotPassword" whenLastCommandName="New" whenLastCommandArgument="loginForm" causesValidation="false" />
      </actionGroup>
    </actions>
    <businessRules>
      <rule id="r100" commandName="Custom" commandArgument="Login" type="JavaScript" phase="Execute">
                  
this.preventDefault();
var resources = Web.MembershipResources.Messages;
$app.login($row.UserName, $row.Password, $row.RememberMe==true,
  function () {
    var returnUrl = window.location.href.match(/\?ReturnUrl=(.+?)(#.+)?$/);
    window.location.replace(returnUrl &amp;&amp; decodeURIComponent(returnUrl[1]) || __baseUrl);
  },
  function () {
    $app.alert(resources.InvalidUserNameAndPassword, function() {$app.input.focus({fieldName:'UserName'})});
  });
                
                </rule>
      <rule id="r101" commandName="Custom" commandArgument="SignUp" type="JavaScript" phase="Execute">
                  
this.preventDefault();
$app.touch.show({
  controller: 'MyProfile',
  startCommand: 'New',
  startArgument: 'signUpForm'
});
                
                </rule>
      <rule id="r102" commandName="Custom" commandArgument="ForgotPassword" type="JavaScript" phase="Execute">
                  
this.preventDefault();
$app.touch.show({
  controller: 'MyProfile',
  startCommand: 'New',
  startArgument: 'passwordRequestForm'
});
                
                </rule>
    </businessRules>
  </dataController>
  <dataController name="Me" label="Me" conflictDetection="overwriteChanges">
    <commands xmlns="urn:schemas-codeontime-com:data-aquarium">
      <command id="command1" type="Text">
        <text>
select
	"Users"."UserID" "UserID"
	,"Users"."UserName" "UserName"
	,"Users"."Password" "Password"
	,"Users"."Email" "Email"
	,"Users"."Comment" "Comment"
	,"Users"."PasswordQuestion" "PasswordQuestion"
	,"Users"."PasswordAnswer" "PasswordAnswer"
	,"Users"."IsApproved" "IsApproved"
	,"Users"."LastActivityDate" "LastActivityDate"
	,"Users"."LastLoginDate" "LastLoginDate"
	,"Users"."LastPasswordChangedDate" "LastPasswordChangedDate"
	,"Users"."CreationDate" "CreationDate"
	,"Users"."IsLockedOut" "IsLockedOut"
	,"Users"."LastLockedOutDate" "LastLockedOutDate"
	,"Users"."FailedPasswordAttemptCount" "FailedPasswordAttemptCount"
	,"Users"."FailedPasswordAttemptWindowStart" "FailedPasswordAttemptWindowStart"
	,"Users"."FailedPasswordAnswerAttemptCount" "FailedPasswordAnswerAttemptCount"
	,"Users"."FailedPasswordAnswerAttemptWindowStart" "FailedPasswordAnswerAttemptWindowStart"
	,"Users"."CustomerID" "CustomerID"
	,"tCustomer"."CustomerName" "CustomerName"
from "dbo"."Users" "Users"
	left join "dbo"."tCustomer" "tCustomer" on "Users"."CustomerID" = "tCustomer"."CustomerID"
</text>
      </command>
      <command id="UserIDIdentityCommand" type="Text" event="Inserted">
        <text>select @@identity</text>
        <output>
          <fieldOutput fieldName="UserID" />
        </output>
      </command>
    </commands>
    <fields xmlns="urn:schemas-codeontime-com:data-aquarium">
      <field name="UserID" type="Int32" allowNulls="false" isPrimaryKey="true" label="User ID" readOnly="true" />
      <field name="UserName" type="String" allowNulls="false" label="User Name" length="128" showInSummary="true" />
      <field name="Password" type="String" allowNulls="false" label="Password" length="128" />
      <field name="Email" type="String" label="Email" length="128" showInSummary="true" />
      <field name="Comment" type="String" allowQBE="false" allowSorting="false" label="Comment" showInSummary="true" />
      <field name="PasswordQuestion" type="String" label="Password Question" length="256" />
      <field name="PasswordAnswer" type="String" label="Password Answer" length="128" />
      <field name="IsApproved" type="Boolean" allowNulls="false" default="((0))" label="Is Approved" showInSummary="true" />
      <field name="LastActivityDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Activity Date" showInSummary="true" readOnly="true" />
      <field name="LastLoginDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Login Date" readOnly="true" />
      <field name="LastPasswordChangedDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Password Changed Date" readOnly="true" />
      <field name="CreationDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Creation Date" readOnly="true" />
      <field name="IsLockedOut" type="Boolean" allowNulls="false" default="((0))" label="Is Locked Out" />
      <field name="LastLockedOutDate" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Last Locked Out Date" readOnly="true" />
      <field name="FailedPasswordAttemptCount" type="Int32" allowNulls="false" default="((0))" label="Failed Password Attempt Count" />
      <field name="FailedPasswordAttemptWindowStart" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Failed Password Attempt Window Start" />
      <field name="FailedPasswordAnswerAttemptCount" type="Int32" allowNulls="false" default="((0))" label="Failed Password Answer Attempt Count" />
      <field name="FailedPasswordAnswerAttemptWindowStart" type="DateTime" allowNulls="false" dataFormatString="g" default="(getdate())" label="Failed Password Answer Attempt Window Start" />
      <field name="CustomerID" type="Int32" label="Customer">
        <items style="Lookup" dataController="Customer" newDataView="createForm1" dataValueField="CustomerID" dataTextField="CustomerName" dataView="grid1" />
      </field>
      <field name="CustomerName" type="String" readOnly="true" label="Customer Name" length="100" />
    </fields>
    <views xmlns="urn:schemas-codeontime-com:data-aquarium">
      <view id="editForm1" type="Form" commandId="command1" label="Review My Details" filter="UserID = @BusinessRules_UserId">
        <headerText />
        <categories>
          <category id="c1" headerText="User">
            <description />
            <dataFields>
              <dataField fieldName="UserName" textMode="Static" />
              <dataField fieldName="Email" />
            </dataFields>
          </category>
          <category headerText="Customer" id="c4">
            <dataFields>
              <dataField fieldName="CustomerName" readOnly="true" textMode="Static" />
            </dataFields>
          </category>
          <category headerText="Password" id="c2" newColumn="true">
            <dataFields>
              <dataField fieldName="Password" textMode="Password" />
              <dataField fieldName="PasswordQuestion" hidden="true" />
              <dataField fieldName="PasswordAnswer" textMode="Password" hidden="true" />
            </dataFields>
          </category>
          <category headerText="Last Modified" id="c3">
            <dataFields>
              <dataField fieldName="CreationDate" columns="20" />
              <dataField fieldName="LastLoginDate" columns="20" />
              <dataField fieldName="LastActivityDate" columns="20" />
              <dataField fieldName="LastPasswordChangedDate" columns="20" />
              <dataField fieldName="LastLockedOutDate" columns="20" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions xmlns="urn:schemas-codeontime-com:data-aquarium">
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Select" commandArgument="editForm1" />
        <action id="a2" commandName="Edit" />
        <action id="a3" commandName="Delete" />
        <action id="a6" />
        <action id="a7" commandName="New" headerText="New User" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a1" commandName="Edit" />
        <action id="a3" commandName="Cancel" />
        <action id="a4" whenLastCommandName="Edit" commandName="Update" commandArgument="Save" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" commandArgument="Save" />
        <action id="a7" whenLastCommandName="New" commandName="Insert" commandArgument="SaveAndNew" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a9" whenLastCommandName="Duplicate" commandName="Insert" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
        <action id="a13" whenLastCommandName="Insert" commandName="Select" commandArgument="editForm1" whenKeySelected="true" whenClientScript="this.get_hasDetails()" />
        <action id="a14" whenLastCommandName="Insert" whenLastCommandArgument="SaveAndNew" commandName="New" />
      </actionGroup>
      <actionGroup id="ag4" scope="ActionBar" headerText="Edit/Delete" flat="true">
        <action id="a1" whenKeySelected="true" commandName="Edit" commandArgument="editForm1" cssClass="EditIcon" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
      </actionGroup>
      <actionGroup id="ag6" scope="ActionBar" headerText="Record">
        <action id="a1" whenLastCommandName="Edit" commandName="Update" />
        <action id="a2" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a3" whenLastCommandName="New" commandName="Insert" />
        <action id="a4" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag8" scope="Row">
        <action id="a4" whenLastCommandName="Edit" commandName="Update" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a6" whenLastCommandName="New" commandName="Insert" />
        <action id="a7" whenLastCommandName="New" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag9" scope="ActionColumn">
        <action id="a1" commandName="Edit" commandArgument="editForm1" />
        <action id="a2" commandName="Delete" />
      </actionGroup>
    </actions>
    <businessRules xmlns="urn:schemas-codeontime-com:data-aquarium">
      <rule id="r100" commandName="Insert|Update" type="Code" phase="Before" />
    </businessRules>
  </dataController>
  <dataController name="ConsignmentUsageSend" label="ConsignmentUsageSend" conflictDetection="overwriteChanges">
    <fields>
      <field name="CustomerRef" type="String" label="Purchase Order No" allowQBE="false" allowSorting="false" htmlEncode="false" hidden="false" />
    </fields>
  </dataController>
  <dataController name="ContentParam" label="ContentParam" conflictDetection="overwriteChanges" generateDataAccessObjects="false">
    <fields>
      <field name="ContentID" type="String" label="Content ID" />
      <field name="SourceID" type="String" label="Number Reference" />
    </fields>
  </dataController>
  <dataController name="Content" label="Content" conflictDetection="overwriteChanges" generateDataAccessObjects="false">
    <commands xmlns="urn:schemas-codeontime-com:data-aquarium">
      <command id="command1" type="Text" custom="false">
        <text>select
	"tContent"."CUSTOMER_ID" "CustomerID"
	,"tContent"."CONTENT_ID" "CONTENT_ID"
	,"tContent"."CONTENT_VER" "CONTENT_VER"
	,"tContent"."CONTENT_DOC_TYPE" "CONTENT_DOC_TYPE"
	,"tContentDocumentType"."CONTENT_TYPE_GROUP" "TcontentdocumenttypecontentTypeGroup"
	,"tContentDocumentType"."CONTENT_DOC_TYPE_NAME" "TcontentdocumenttypecontentDocTypeName"
	,"tContent"."CONTENT_NAME" "CONTENT_NAME"
	,"tContent"."CONTENT_PATH" "CONTENT_PATH"
	,"tContent"."EFFECTIVE_IND" "EFFECTIVE_IND"
	,"tContent"."LAST_VERSION_IND" "LAST_VERSION_IND"
	,"tContent"."CTRL_USER_ID" "CTRL_USER_ID"
	,"tContent"."CTRL_CRE_DATE" "CTRL_CRE_DATE"
	,"tContent"."CTRL_UPD_DATE" "CTRL_UPD_DATE"
	,"tContent"."CTRL_APP_NAME" "CTRL_APP_NAME"
	,"tContent"."SECURITY_PROF" "SECURITY_PROF"
	,"tContent"."NOTES" "NOTES"
	,"tContent"."SOURCE_ID" "SOURCE_ID"
	,"tContent"."CUSTOMER_REF" "CUSTOMER_REF"
	,"tContent"."CUSTOMER_ORDER_NUM" "CUSTOMER_ORDER_NUM"
from "dbo"."tContent" "tContent"
	left join "dbo"."tContentDocumentType" "tContentDocumentType" on "tContent"."CONTENT_DOC_TYPE" = "tContentDocumentType"."CONTENT_DOC_TYPE"</text>
      </command>
    </commands>
    <fields xmlns="urn:schemas-codeontime-com:data-aquarium">
      <field name="Customer_Name" type="String" label="Customer Name" computed="true" readOnly="true" showInSummary="true">
        <formula>select customerName
from  tcustomer
where customerid = customer_id</formula>
      </field>
      <field name="CustomerID" type="Int32" allowNulls="false" label="Customer Id" showInSummary="true" readOnly="true" />
      <field name="CONTENT_ID" type="Int32" allowNulls="false" isPrimaryKey="true" label="Content ID" readOnly="true" />
      <field name="CONTENT_VER" type="Int32" allowNulls="false" isPrimaryKey="true" label="Content Ver" readOnly="true" />
      <field name="CONTENT_DOC_TYPE" type="String" label=" Document Type" length="6" showInSummary="true">
        <items dataController="ContentDocumentType" dataTextField="CONTENT_DOC_TYPE_NAME" copy="TcontentdocumenttypecontentDocTypeName=CONTENT_DOC_TYPE_NAME" dataValueField="CONTENT_DOC_TYPE" />
      </field>
      <field name="TcontentdocumenttypecontentTypeGroup" type="String" readOnly="true" label="Content Type Group" length="12" />
      <field name="TcontentdocumenttypecontentDocTypeName" type="String" readOnly="true" label="Tcontentdocumenttypecontent Doc Type Name" length="100" />
      <field name="CONTENT_NAME" type="String" label="Content Name" length="100" showInSummary="true" readOnly="true" roles="Content Admin" />
      <field name="CONTENT_PATH" type="String" allowQBE="false" allowSorting="false" label="Content Path" length="2000" showInSummary="true" readOnly="true" />
      <field name="EFFECTIVE_IND" type="String" label="Effective Indicator" length="1" showInSummary="true" readOnly="true" computed="true">
        <formula>case when EFFECTIVE_IND = 'Y' then 'Yes' else 'No' end</formula>
      </field>
      <field name="LAST_VERSION_IND" type="String" label="Last Version Ind" length="1" readOnly="true" computed="true" showInSummary="true">
        <formula>case when LAST_VERSION_IND = 'Y' then 'Yes' else 'No' end</formula>
      </field>
      <field name="CTRL_USER_ID" type="String" label="Last User Modified" length="50" readOnly="true" />
      <field name="CTRL_CRE_DATE" type="DateTime" label="Creation Date" readOnly="true" />
      <field name="CTRL_UPD_DATE" type="DateTime" dataFormatString="g" label="Update Date" readOnly="true" />
      <field name="CTRL_APP_NAME" type="String" label="Last Application Update" length="50" readOnly="true" />
      <field name="SECURITY_PROF" type="String" label="Security Prof" length="50" readOnly="true" />
      <field name="NOTES" type="String" allowQBE="false" allowSorting="false" label="Notes" showInSummary="true" />
      <field name="SOURCE_ID" type="String" label="Number Reference" length="25" />
      <field name="DownloadLinkNew" type="String" label="Download Link" computed="true" htmlEncode="false" dataFormatString="&lt;a href=&quot;../download/{0}&quot; target=&quot;_blank&quot; type=&quot;PDF&quot;&gt;Click here&lt;/a&gt;" isVirtual="true">
        <formula>cast("tContent"."Customer_ID" as varchar)+'/'+"tContent"."content_Name"</formula>
      </field>
      <field name="UserName" type="String" label="User Name" computed="true" readOnly="true">
        <formula>select @UserName</formula>
      </field>
      <field name="ContentType" type="String" label="Content Type" computed="true">
        <formula>select 'application/pdf'</formula>
      </field>
      <field name="TcontentdocumenttypecontentTypeGroupName" type="String" label="Tcontentdocumenttypecontent Type Group Name" />
      <field name="CUSTOMER_REF" type="String" label="Customer Reference" length="50" />
      <field name="CUSTOMER_ORDER_NUM" type="String" label="Customer Order Number" length="50" />
      <field name="DownloadLink" type="String" label="Download Link" computed="true" dataFormatString="&lt;img src='../touch/images/pdf-icon2.jpg' onclick='window.open(&quot;../download/{0}&quot;)' style='width: 50px; border-radius: 10px;'&gt;" htmlEncode="false">
        <formula>cast(tContent.Customer_ID as varchar)+'/'+tContent.CONTENT_NAME</formula>
      </field>
    </fields>
    <views xmlns="urn:schemas-codeontime-com:data-aquarium">
      <view id="grid1" type="Grid" commandId="command1" label="Content" filter="LAST_VERSION_IND = 'Yes'&#xD;&#xA;AND EFFECTIVE_IND = 'Yes'" groupExpression="TcontentdocumenttypecontentDocTypeName" sortExpression="ctrl_cre_date desc" showInSelector="false">
        <headerText />
        <dataFields>
          <dataField fieldName="CTRL_CRE_DATE" columns="20" />
          <dataField fieldName="CUSTOMER_REF" columns="50">
          </dataField>
          <dataField fieldName="SOURCE_ID" columns="25" search="Suggested" searchOptions="$between,=,$in,$contains">
          </dataField>
          <dataField fieldName="CONTENT_DOC_TYPE" aliasFieldName="TcontentdocumenttypecontentTypeGroup" hyperlinkFormatString="~/pages/tContentDocumentType?CONTENT_DOC_TYPE={CONTENT_DOC_TYPE}&amp;_controller=tContentDocumentType&amp;_command=Select&amp;_argument=editForm1" hidden="true">
          </dataField>
          <dataField fieldName="NOTES" rows="5" />
          <dataField fieldName="DownloadLinkNew" rows="5" hidden="true">
          </dataField>
          <dataField fieldName="Customer_Name" rows="5" hidden="true">
          </dataField>
          <dataField fieldName="CustomerID" columns="15" hidden="true">
          </dataField>
          <dataField fieldName="CONTENT_ID" columns="15" hidden="true">
          </dataField>
          <dataField fieldName="CONTENT_VER" columns="15" hidden="true">
          </dataField>
          <dataField fieldName="TcontentdocumenttypecontentDocTypeName">
            <headerText>Document Type</headerText>
          </dataField>
          <dataField fieldName="CONTENT_NAME" hidden="true">
          </dataField>
          <dataField fieldName="CONTENT_PATH" rows="5" hidden="true">
          </dataField>
          <dataField fieldName="EFFECTIVE_IND" columns="1" hidden="true">
          </dataField>
          <dataField fieldName="LAST_VERSION_IND" columns="1" hidden="true">
          </dataField>
          <dataField fieldName="CTRL_USER_ID" columns="50" hidden="true">
          </dataField>
          <dataField fieldName="TcontentdocumenttypecontentTypeGroup" columns="12" hidden="true">
            <headerText>Document Type Group</headerText>
          </dataField>
          <dataField fieldName="CTRL_UPD_DATE" columns="20" hidden="true">
          </dataField>
          <dataField fieldName="CTRL_APP_NAME" columns="50" hidden="true">
          </dataField>
          <dataField fieldName="SECURITY_PROF" columns="50" hidden="true">
          </dataField>
          <dataField fieldName="UserName" rows="5" hidden="true">
          </dataField>
          <dataField fieldName="ContentType" rows="5" hidden="true">
          </dataField>
          <dataField fieldName="DownloadLink" rows="5" toolTip="Download Link" watermark="Download Link">
            <headerText>Download Link</headerText>
            <footerText>Download Link</footerText>
          </dataField>
        </dataFields>
        <overrideWhen />
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Content">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category headerText="Customer Details" id="c3">
            <dataFields>
              <dataField fieldName="Customer_Name" rows="5" />
              <dataField fieldName="CustomerID" columns="15" hidden="true">
              </dataField>
            </dataFields>
          </category>
          <category id="c1" headerText="Content Details">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="CONTENT_ID" columns="15" />
              <dataField fieldName="CONTENT_VER" columns="15" />
              <dataField fieldName="SOURCE_ID" columns="25">
              </dataField>
              <dataField fieldName="CONTENT_DOC_TYPE" aliasFieldName="TcontentdocumenttypecontentTypeGroup" hyperlinkFormatString="~/pages/tContentDocumentType?CONTENT_DOC_TYPE={CONTENT_DOC_TYPE}&amp;_controller=tContentDocumentType&amp;_command=Select&amp;_argument=editForm1" />
              <dataField fieldName="TcontentdocumenttypecontentDocTypeName" />
              <dataField fieldName="CONTENT_NAME" />
              <dataField fieldName="CONTENT_PATH" rows="5" hidden="true">
              </dataField>
              <dataField fieldName="EFFECTIVE_IND" columns="1" />
              <dataField fieldName="LAST_VERSION_IND" columns="1" />
              <dataField fieldName="SECURITY_PROF" columns="50" hidden="true">
              </dataField>
              <dataField fieldName="DownloadLinkNew" rows="5" readOnly="true">
              </dataField>
            </dataFields>
          </category>
          <category headerText="NOTES" id="c4" newColumn="true">
            <dataFields>
              <dataField fieldName="NOTES" rows="5" />
            </dataFields>
          </category>
          <category headerText="Control Details" id="c2">
            <dataFields>
              <dataField fieldName="CTRL_USER_ID" columns="50" />
              <dataField fieldName="CTRL_CRE_DATE" columns="20" />
              <dataField fieldName="CTRL_UPD_DATE" columns="20" />
              <dataField fieldName="CTRL_APP_NAME" columns="50" />
              <dataField fieldName="UserName" rows="5" hidden="true">
              </dataField>
              <dataField fieldName="ContentType" rows="5" hidden="true">
              </dataField>
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New t Content">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New t Content">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="CustomerID" columns="15" />
              <dataField fieldName="CONTENT_ID" columns="15" />
              <dataField fieldName="CONTENT_VER" columns="15" />
              <dataField fieldName="CONTENT_DOC_TYPE" aliasFieldName="TcontentdocumenttypecontentTypeGroup" />
              <dataField fieldName="TcontentdocumenttypecontentDocTypeName" />
              <dataField fieldName="CONTENT_NAME" />
              <dataField fieldName="CONTENT_PATH" rows="5" />
              <dataField fieldName="EFFECTIVE_IND" columns="1" />
              <dataField fieldName="LAST_VERSION_IND" columns="1" />
              <dataField fieldName="CTRL_USER_ID" columns="50" />
              <dataField fieldName="CTRL_CRE_DATE" columns="20" />
              <dataField fieldName="CTRL_UPD_DATE" columns="20" />
              <dataField fieldName="CTRL_APP_NAME" columns="50" />
              <dataField fieldName="SECURITY_PROF" columns="50" />
              <dataField fieldName="NOTES" rows="5" />
              <dataField fieldName="SOURCE_ID" columns="25" />
              <dataField fieldName="ContentType" rows="5" hidden="true">
              </dataField>
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions xmlns="urn:schemas-codeontime-com:data-aquarium">
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Cancel" />
        <action id="a6" />
        <action id="a9" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form" flat="false">
        <action id="a3" commandName="Cancel" />
        <action id="a5" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag100" scope="ActionBar" headerText="Document Filters" flat="false">
        <action id="a1" commandName="Navigate" commandArgument="../pages/all-documents" headerText="All Records" />
        <action id="a2" commandName="Navigate" commandArgument="~/pages/all-documents?TcontentdocumenttypecontentTypeGroup=DESPATCH" headerText="Despatch" />
        <action commandName="Navigate" headerText="Order Confirmation" id="a100" commandArgument="~/pages/all-documents?TcontentdocumenttypecontentTypeGroup=ORDER" />
        <action commandName="Navigate" headerText="Invoice &amp; Credits" id="a101" commandArgument="~/pages/all-documents?TcontentdocumenttypecontentTypeGroup=INVOICE" />
        <action commandName="Navigate" headerText="Montly Statements" id="a102" commandArgument="~/pages/all-documents?content_Doc_Type=MON" />
      </actionGroup>
      <actionGroup id="ag101" scope="ActionBar" headerText="Search by ID" flat="true">
        <action commandName="SQL" confirmation="_controller=ContentParam&#xD;&#xA;_title=Search Parameters&#xD;&#xA;_width=500" id="a100" headerText="Search by ID" roles="XXX">
          <data>declare @NavToURL varchar(500);

if @Parameters_ContentID &lt;&gt; ''
begin
set @NavToURL='../Pages/content?CONTENT_ID='+@Parameters_ContentID;
end

if @Parameters_SourceID &lt;&gt; ''
begin
set @NavToURL='../Pages/content?SOURCE_ID='+@Parameters_SourceID;
end


set @Result_NavigateUrl = @NavToURL;</data>
        </action>
      </actionGroup>
      <actionGroup id="ag102" scope="Row" flat="false">
        <action commandName="Navigate" id="a100" commandArgument="_blank:../download/{DownloadLinkNew}" />
      </actionGroup>
    </actions>
    <businessRules xmlns="urn:schemas-codeontime-com:data-aquarium">
      <rule id="r100" commandName="Delete" type="Sql" phase="Execute" name="DeleteRule">-- Prevent System from updating .
-- we will update manually.
	

	if @EFFECTIVE_IND &lt;&gt; 'Y'
	begin

 		set @Result_ShowAlert  = 
    	'Current Content is already :' +@EFFECTIVE_IND ;
		
		set @BusinessRules_PreventDefault = 1;
		
 		GOTO WRAPUP;
	end 

-- Prevent System from updating .
-- we will update manually.
    set @BusinessRules_PreventDefault = 1;

-- increment the content version first.
	update tContent
	set    content_ver = content_ver +1
	where  content_id = @CONTENT_ID
	and    content_ver = @CONTENT_VER;

-- copy the record, before new changes apply.
	insert into tContent
	(CUSTOMER_ID,CONTENT_ID,CONTENT_VER, CONTENT_DOC_TYPE, CONTENT_NAME, CONTENT_PATH, EFFECTIVE_IND, LAST_VERSION_IND, CTRL_USER_ID, CTRL_CRE_DATE, CTRL_UPD_DATE, CTRL_APP_NAME, SECURITY_PROF, NOTES)
	select customer_id,
			content_id,
		    content_ver-1,      			   		
	   		content_doc_type,
	   		content_name,
	   		content_path,
	   		effective_ind,
	   		'N',
	   		ctrl_user_id,
	   		CTRL_CRE_DATE,
	   		getdate(),
	   		null, 
	   		null,
			notes
	from   tContent
	where  content_id = @CONTENT_ID
	and    content_ver = @CONTENT_VER+1
	and    last_version_ind = 'Y';






	set @LAST_VERSION_IND = 'Y';
	set @CONTENT_VER = @CONTENT_VER +1;

-- at this stage ContentVersion has already been incremented and inserted.
	update tContent
	set last_version_ind = @LAST_VERSION_IND,
		effective_ind = 'N',
		ctrl_user_id = @UserName,
		ctrl_upd_date = getdate(),
		ctrl_cre_date = getdate()
	where  content_id = @CONTENT_ID
	and    content_ver = @CONTENT_VER
	and    last_version_ind = 'Y';
	
WRAPUP:
    

END</rule>
      <rule id="r101" commandName="Update|Delete" type="JavaScript" phase="Before">if ([LAST_VERSION_IND] != 'Yes')
{
// tell the client library to skip the execution of update, insert, or delete
    this.preventDefault();    

     //this.result.focus(
     //   'LastVersionInd', 'You can only update latest version of the content. ' +
     //   'The current record selected is not the latest version.' );

    // show an additional information in the message bar at the top of the page
    this.result.showMessage('Error: You can only {0} latest version of the content. Current selected record "Last Version Indicator" is: {1}', 
        this.arguments().CommandName, [LAST_VERSION_IND]);
}</rule>
      <rule id="r102" commandName="Update" type="Sql" phase="Execute">BEGIN

-- Prevent System from updating .
-- we will update manually.
set @BusinessRules_PreventDefault = 1


-- increment the content version first.
update tContent
set    content_ver = content_ver +1
where  content_id = @CONTENT_ID
and    content_ver = @CONTENT_VER;

-- copy the record, before new changes apply.
	insert into tContent
	(CUSTOMER_ID,CONTENT_ID,CONTENT_VER, CONTENT_DOC_TYPE, CONTENT_NAME, CONTENT_PATH, EFFECTIVE_IND, LAST_VERSION_IND, CTRL_USER_ID, CTRL_CRE_DATE, CTRL_UPD_DATE, CTRL_APP_NAME, SECURITY_PROF, NOTES)
	select customer_id,
			content_id,
		    content_ver-1,      			   		
	   		content_doc_type,
	   		content_name,
	   		content_path,
	   		effective_ind,
	   		'N',
	   		ctrl_user_id,
	   		CTRL_CRE_DATE,
	   		getdate(),
	   		null, 
	   		null,
			notes
	from   tContent
	where  content_id = @CONTENT_ID
	and    content_ver = @CONTENT_VER+1
	and    last_version_ind = 'Y';







set @CONTENT_VER = @CONTENT_VER +1;


-- at this stage ContentVersion has already been incremented and inserted.
update  tContent
set     notes= @NOTES,
		content_doc_type = @CONTENT_DOC_TYPE,
		ctrl_user_id = @UserName,
		ctrl_upd_date = getdate(),
		ctrl_cre_date = getdate()
where   content_id = @CONTENT_ID
and     content_ver = @CONTENT_VER
and     last_version_ind = 'Y';



		
		
END</rule>
    </businessRules>
  </dataController>
  <dataController name="DocumentSearchParam" conflictDetection="overwriteChanges" label="DocumentSearchParam" nativeSchema="dbo" nativeTableName="DocumentSearchParam" xmlns="urn:schemas-codeontime-com:data-aquarium">
    <commands>
    </commands>
    <fields>
      <field name="CustomerID" type="Int32" label="Customer ID" showInSummary="true" />
      <field name="SourceID" type="String" label="Enter an ID to search:" length="25" showInSummary="true" isPrimaryKey="true" />
      <field name="GridResults" type="DataView" label="Document Search Results">
        <dataView controller="DocumentSearchResults" view="grid1" />
      </field>
    </fields>
    <views>
      <view id="editForm1" type="Form" commandId="command1" label="Document Search">
        <headerText />
        <categories>
          <category id="c1" headerText="Document Search Parameter">
            <description />
            <dataFields>
              <dataField fieldName="CustomerID" columns="15" hidden="true">
              </dataField>
              <dataField fieldName="SourceID" columns="25" />
            </dataFields>
          </category>
          <category id="c2">
            <dataFields>
              <dataField fieldName="GridResults" tag="view-style-grid">
                <dataView showActionBar="false" showDescription="false" showViewSelector="false" showSearchBar="false" showQuickFind="false" showPageSize="false" />
                <headerText>Document Search Results</headerText>
              </dataField>
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Document Search Param">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New Document Search Param">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="CustomerID" columns="15" />
              <dataField fieldName="SourceID" columns="25" />
            </dataFields>
          </category>
          <category id="c2">
            <dataFields>
              <dataField fieldName="GridResults" tag="view-style-grid">
                <dataView showSearchBar="false" showQuickFind="false" showActionBar="false" showViewSelector="false" showDescription="false" showPageSize="false" />
                <headerText>Document Search Results</headerText>
              </dataField>
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid" flat="false">
        <action id="a1" commandName="Cancel" />
        <action id="a6" />
        <action id="a9" />
        <action id="a10" commandName="BatchEdit" commandArgument="editForm1" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form" flat="false">
        <action id="a5" whenLastCommandName="Edit" commandName="SQL" headerText="Search" key="Enter">
          <data>--set @Result_ShowAlert = '@Session_SourceID=' + cast(@Session_SourceID as varchar);

set @Result_NavigateUrl = '../pages/document-search?SourceIDInput='+cast(@SourceID as varchar);</data>
        </action>
      </actionGroup>
    </actions>
    <businessRules>
      <rule id="GetData" commandName="Select" type="Code" phase="Before" />
      <rule id="Insert" commandName="Insert" type="Code" phase="Before" />
      <rule id="Update" commandName="Update" type="Code" phase="Before" />
      <rule id="Delete" commandName="Delete" type="Code" phase="Before" />
    </businessRules>
  </dataController>
  <dataController name="DocumentSearchResults" conflictDetection="overwriteChanges" label="DocumentSearchResults" nativeSchema="dbo" nativeTableName="DocumentSearchResults" xmlns="urn:schemas-codeontime-com:data-aquarium" generateDataAccessObjects="false">
    <commands>
    </commands>
    <fields>
      <field name="CustomerID" type="Int32" allowNulls="false" label="Customer#" showInSummary="true" />
      <field name="ContentID" type="Int32" allowNulls="false" label="Content#" showInSummary="true" isPrimaryKey="true" />
      <field name="ContentVer" type="Int32" allowNulls="false" label="Content Ver" showInSummary="true" />
      <field name="ContentDocType" type="String" label="Content Doc Type" length="6" />
      <field name="TcontentDocumentTypeContentTypeGroup" type="String" label="Tcontent Document Type Content Type Group" length="12" showInSummary="true" />
      <field name="TcontentDocumentTypeContentDocTypeName" type="String" label="Doc Type Name" length="50" />
      <field name="ContentName" type="String" label="Content Name" length="100" />
      <field name="ContentPath" type="String" label="Content Path" length="2000" />
      <field name="EffectiveInd" type="String" label="Effective Ind" length="1" />
      <field name="LastVersionInd" type="String" label="Last Version Ind" length="1" />
      <field name="CtrlUserID" type="String" label="Ctrl User#" length="50" />
      <field name="CtrlCreDate" type="DateTime" label="Creation Date" />
      <field name="CtrlUpdDate" type="DateTime" label="Update Date" />
      <field name="CtrlAppName" type="String" label="Ctrl App Name" length="50" />
      <field name="SecurityProf" type="String" label="Security Prof" length="50" />
      <field name="CustomerRef" type="String" label="Customer Reference" length="50" />
      <field name="SourceID" type="String" label="Number Reference" length="25" />
      <field name="Notes" type="String" allowQBE="false" allowSorting="false" label="Notes" />
      <field name="CustomerOrderNum" type="String" label="Customer Order Num" length="50" />
      <field name="DownloadLinkNew" type="String" label="Download Link" dataFormatString="&lt;img src='../touch/images/pdf-icon2.jpg' onclick='window.open(&quot;../download/{0}&quot;)' style='width: 50px; border-radius: 10px;'&gt;" computed="true" htmlEncode="false">
        <formula>cast(@CustomerID as varchar)+'/'+@ContentName</formula>
      </field>
    </fields>
    <views>
      <view id="grid1" type="Grid" commandId="command1" label="Document Search Results" groupExpression="TcontentDocumentTypeContentDocTypeName" showInSelector="false" sortExpression="CtrlCreDate">
        <headerText />
        <dataFields>
          <dataField fieldName="CtrlCreDate" columns="10">
            <headerText>Creation Date</headerText>
          </dataField>
          <dataField fieldName="CustomerID" columns="15" hidden="true">
          </dataField>
          <dataField fieldName="ContentID" columns="15" hidden="true">
          </dataField>
          <dataField fieldName="ContentVer" columns="15" hidden="true">
          </dataField>
          <dataField fieldName="ContentDocType" columns="6" hidden="true">
            <headerText>Document Type</headerText>
          </dataField>
          <dataField fieldName="TcontentDocumentTypeContentTypeGroup" columns="12" hidden="true">
            <headerText>Document Type</headerText>
          </dataField>
          <dataField fieldName="TcontentDocumentTypeContentDocTypeName">
            <headerText>Document Type</headerText>
          </dataField>
          <dataField fieldName="ContentName" hidden="true">
          </dataField>
          <dataField fieldName="ContentPath" hidden="true">
          </dataField>
          <dataField fieldName="EffectiveInd" columns="1" hidden="true">
          </dataField>
          <dataField fieldName="LastVersionInd" columns="1" hidden="true">
          </dataField>
          <dataField fieldName="CtrlUserID" columns="50" hidden="true">
          </dataField>
          <dataField fieldName="CtrlAppName" columns="50" hidden="true">
          </dataField>
          <dataField fieldName="SecurityProf" columns="50" hidden="true">
          </dataField>
          <dataField fieldName="CustomerRef" columns="50" />
          <dataField fieldName="SourceID" columns="25" />
          <dataField fieldName="Notes" rows="5" />
          <dataField fieldName="CustomerOrderNum" columns="50" hidden="true">
          </dataField>
          <dataField fieldName="DownloadLinkNew" rows="5" toolTip="Download Link" watermark="Download Link">
            <headerText>Download Link</headerText>
            <footerText>Download Link</footerText>
          </dataField>
          <dataField fieldName="CtrlUpdDate" columns="10" hidden="true">
          </dataField>
        </dataFields>
      </view>
      <view id="editForm1" type="Form" commandId="command1" label="Review Document Search Results">
        <headerText>$DefaultEditViewDescription</headerText>
        <categories>
          <category id="c1" headerText="Document Search Results">
            <description>$DefaultEditDescription</description>
            <dataFields>
              <dataField fieldName="CustomerID" columns="15" hidden="true">
              </dataField>
              <dataField fieldName="ContentID" columns="15" />
              <dataField fieldName="ContentVer" columns="15" />
              <dataField fieldName="ContentDocType" columns="6" />
              <dataField fieldName="TcontentDocumentTypeContentTypeGroup" columns="12" />
              <dataField fieldName="TcontentDocumentTypeContentDocTypeName" />
              <dataField fieldName="ContentName" />
              <dataField fieldName="ContentPath" />
              <dataField fieldName="EffectiveInd" columns="1" />
              <dataField fieldName="LastVersionInd" columns="1" />
              <dataField fieldName="CtrlUserID" columns="50" />
              <dataField fieldName="CtrlCreDate" columns="10" />
              <dataField fieldName="CtrlUpdDate" columns="10" />
              <dataField fieldName="CtrlAppName" columns="50" />
              <dataField fieldName="SecurityProf" columns="50" />
              <dataField fieldName="Notes" rows="5" />
              <dataField fieldName="SourceID" columns="25" />
              <dataField fieldName="CustomerRef" columns="50" />
              <dataField fieldName="CustomerOrderNum" columns="50" />
            </dataFields>
          </category>
        </categories>
      </view>
      <view id="createForm1" type="Form" commandId="command1" label="New Document Search Results">
        <headerText>$DefaultCreateViewDescription</headerText>
        <categories>
          <category id="c1" headerText="New Document Search Results">
            <description>$DefaultNewDescription</description>
            <dataFields>
              <dataField fieldName="CustomerID" columns="15" hidden="true">
              </dataField>
              <dataField fieldName="ContentID" columns="15" />
              <dataField fieldName="ContentVer" columns="15" />
              <dataField fieldName="ContentDocType" columns="6" />
              <dataField fieldName="TcontentDocumentTypeContentTypeGroup" columns="12" />
              <dataField fieldName="TcontentDocumentTypeContentDocTypeName" />
              <dataField fieldName="ContentName" />
              <dataField fieldName="ContentPath" />
              <dataField fieldName="EffectiveInd" columns="1" />
              <dataField fieldName="LastVersionInd" columns="1" />
              <dataField fieldName="CtrlUserID" columns="50" />
              <dataField fieldName="CtrlCreDate" columns="10" />
              <dataField fieldName="CtrlUpdDate" columns="10" />
              <dataField fieldName="CtrlAppName" columns="50" />
              <dataField fieldName="SecurityProf" columns="50" />
              <dataField fieldName="Notes" rows="5" />
              <dataField fieldName="SourceID" columns="25" />
              <dataField fieldName="CustomerRef" columns="50" />
              <dataField fieldName="CustomerOrderNum" columns="50" />
            </dataFields>
          </category>
        </categories>
      </view>
    </views>
    <actions>
      <actionGroup id="ag1" scope="Grid">
        <action id="a1" commandName="Cancel" />
        <action id="a6" />
        <action id="a9" />
      </actionGroup>
      <actionGroup id="ag2" scope="Form">
        <action id="a3" commandName="Cancel" />
        <action id="a6" whenLastCommandName="Edit" commandName="Cancel" />
        <action id="a8" whenLastCommandName="New" commandName="Cancel" />
        <action id="a10" whenLastCommandName="Duplicate" commandName="Cancel" />
      </actionGroup>
      <actionGroup id="ag5" scope="ActionBar" headerText="Actions">
        <action id="a1" commandName="ExportCsv" />
        <action id="a2" />
        <action id="a3" commandName="ExportRowset" />
        <action id="a4" commandName="ExportRss" />
      </actionGroup>
      <actionGroup id="ag7" scope="ActionBar" headerText="Report">
        <action id="a1" commandName="ReportAsPdf" />
        <action id="a2" commandName="ReportAsImage" />
        <action id="a3" commandName="ReportAsExcel" />
        <action id="a4" commandName="ReportAsWord" />
      </actionGroup>
      <actionGroup id="ag100" scope="Row" flat="false">
        <action commandName="Navigate" id="a100" commandArgument="_blank:../download/{DownloadLinkNew}" />
      </actionGroup>
    </actions>
    <businessRules>
      <rule type="Sql" id="enableResultSet" commandName="Select" phase="Before">set @BusinessRules_EnableResultSet = 1
-- Enable caching of the result set. Duration is specified in seconds.
-- set @BusinessRules_ResultSetCacheDuration = 30 </rule>
      <rule type="Sql" id="getData" commandName="Select" phase="Before">select @Session_CustomerID = max(CustomerID)
from   dbo.[Users] "Users" 
where "Users"."userName" = @BusinessRules_UserName;



exec pContent_Search @CustomerID=@Session_CustomerID, @ReferenceNo=@Url_SourceIDInput;

--set @Result_ShowAlert = '@Url_SourceIDInput=' + cast(@Url_SourceIDInput as varchar);
</rule>
      <rule type="Sql" id="insert" commandName="Insert" phase="Before">set @BusinessRules_PreventDefault = 1
-- implement insert here</rule>
      <rule type="Sql" id="update" commandName="Update" phase="Before">set @BusinessRules_PreventDefault = 1
-- implement update here</rule>
      <rule type="Sql" id="delete" commandName="Delete" phase="Before">set @BusinessRules_PreventDefault = 1
-- implement delete here</rule>
    </businessRules>
  </dataController>
</dataControllerCollection>